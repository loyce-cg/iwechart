{"version":3,"sources":["window/filechooser/FileChooserWindowView.ts"],"names":[],"mappings":"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","file":"FileChooserWindowView.js","sourcesContent":["import {func as mainTemplate} from \"./template/main.html\";\nimport {component, webUtils, window as wnd, Q, JQuery as $, Types, Logger as RootLogger} from \"pmc-web\";\nimport {Model} from \"../notes2/Notes2WindowController\";\nimport {FilesListView} from \"../../component/fileslist/FilesListView\";\nimport { HostEntryModel } from \"../notes2/Notes2WindowView\";\nlet Logger = RootLogger.get(\"main.FileChooser\");\n\nexport enum FocusedElement {\n    SIDEBAR,\n    FILES_LIST\n}\n\n\nexport class FileChooserWindowView extends wnd.base.BaseWindowView<Model> {\n    $modulesContainer: JQuery;\n    splitter: component.splitter.SplitterView;\n    sidebar: component.sidebar.SidebarView;\n    $placeholders: JQuery[] = [];\n    activeModulesCount: number;\n    useAutoResizer: boolean = true;\n    \n    personsComponent: component.persons.PersonsView;\n    personTooltip: component.persontooltip.PersonTooltipView;\n    notifications: component.notification.NotificationView;\n    sectionTooltip: component.sectiontooltip.SectionTooltipView;\n    \n    lastFocusedElement: FocusedElement = FocusedElement.SIDEBAR;\n    leftPanelGroups: string[] = [\"my-files\", /*\"other-files\",*/ \"common-files\", \"conversations\"];\n      \n    filesLists: {[id: string]: FilesListView};\n    $listsContainer: JQuery;;\n    active: FilesListView;\n    remoteServers: {[hostHash: string]: HostEntryModel};\n    \n    switchToFilesListAfterActivateFiles: { highlight: boolean } = null;\n       \n    constructor(parent: Types.app.ViewParent) {\n        super(parent, mainTemplate);\n        this.filesLists = {};\n        if (this.useAutoResizer) {\n            this.useAutoResizer = !!(<any>window).ResizeObserver;\n        }\n        \n        this.notifications = this.addComponent(\"notifications\", new component.notification.NotificationView(this, {xs: true}));\n        this.personsComponent = this.addComponent(\"personsComponent\", new component.persons.PersonsView(this, this.helper));\n        this.personTooltip = new component.persontooltip.PersonTooltipView(this.templateManager, this.personsComponent);\n        this.sectionTooltip = this.addComponent(\"sectiontooltip\", new component.sectiontooltip.SectionTooltipView(this));\n                \n        this.sidebar = this.addComponent(\"sidebar\", new component.sidebar.SidebarView(this, {\n            conv2List: {\n                personsView: this.personsComponent,\n                extList: {\n                    template: null\n                }\n            },\n            conv2Splitter: null,\n            customElementList: {\n                extList: {\n                    template: null,\n                    onAfterListRender: this.onAfterRenderCustomList.bind(this)\n                }\n            },\n            sectionList: {\n                extList: {\n                    template: null\n                }\n            },\n            customSectionList: {\n                extList: {\n                    template: null\n                }\n            },\n        }));\n\n    }\n\n    onAfterRenderCustomList(): void {\n        this.personsComponent.refreshAvatars();\n    }\n        \n    initWindow(model: Model) {\n        this.$main.on(\"click\", \"[data-action=close]\", this.onCloseClick.bind(this));\n        this.$main.on(\"click\", \"[data-action=select]\", this.onOkClick.bind(this));\n        this.$modulesContainer = this.$main.find(\".modules-container\");\n        // this.bindKeyPresses();\n        let blurCheckId: NodeJS.Timer;\n        document.addEventListener(\"blur\", () => {\n            clearTimeout(blurCheckId);\n            blurCheckId = setTimeout(() => {\n                let fe = this.getFocusedElement();\n                if (fe != null) {\n                    this.lastFocusedElement = fe;\n                }\n            }, 1);\n        }, true);\n        document.addEventListener(\"focus\", () => {\n            clearTimeout(blurCheckId);\n            let fe = this.getFocusedElementFromEl($(<HTMLElement>document.activeElement));\n            if (fe != null) {\n                this.lastFocusedElement = fe;\n            }\n        }, true);\n        return Q().then(() => {\n            this.turnTimeAgoRefresher();\n            this.$body.on(\"keydown\", this.onKeydown.bind(this));\n            this.personsComponent.$main = this.$main;\n            this.personTooltip.init(this.$main);\n            return this.personsComponent.triggerInit();\n        })\n        .then(() => {\n            this.splitter = this.addComponent(\"splitter\", new component.splitter.SplitterView(this, {type: \"vertical\", handlePlacement: \"right\"}));\n            this.splitter.$container = this.$modulesContainer;\n            return this.splitter.triggerInit();\n        })\n        .then(() => {\n            this.$listsContainer = $(\"<div class='lists-container'></div>\");\n            this.splitter.$right.empty().append(this.$listsContainer);\n            this.splitter.$left.addClass(\"sidebar-container\");\n            return;\n        })\n        .then(() => {\n            this.sidebar.$container = this.splitter.$left;\n            return this.sidebar.triggerInit();\n        })\n        .then(() => {\n            this.$modulesContainer.on(\"click\", \".action-item[action-id=select]\", this.onFileSelectClick.bind(this));\n            return;\n        });\n    }\n    \n    createFilesList(id: string): Q.Promise<void> {\n        return Q().then(() => {\n            this.filesLists[id] = this.addComponent(id, new FilesListView(this, this.personsComponent));\n            let $filesList = $(\"<div class='notes2-fileslist-component' data-list-id='\" + id + \"'></div>\");\n            this.$listsContainer.append($filesList);\n            this.filesLists[id].$container = $filesList;\n            return this.filesLists[id].triggerInit();\n        })\n    }\n    \n    customizeActions($parent: JQuery): void {\n        // let $container = $parent.find(\".files-actions-container\");\n        // let $actions = $container.find(\"div.center\");\n        // $actions.removeClass(\"center\").addClass(\"right\");\n        // $actions.children().each((_i, x) => {\n        //     x.remove();\n        // });\n        // $actions.append($(\"<button class='action-item btn btn-default btn-sm small gray' action-id='select' title='\" + this.i18n(\"plugin.notes2.window.filechooser.select\") + \"'><i class='fa fa-check'></i>\" + this.i18n(\"plugin.notes2.window.filechooser.select\") + \"</button>\"));\n    }\n    \n    onFileSelectClick(): void {\n        this.triggerEvent(\"select\");\n    }\n    \n    setName(name: string): void {\n        this.$main.find(\".name .text\").html(name);\n    }\n\n    \n    onCloseClick(): void {\n        this.triggerEvent(\"close\");\n    }\n    \n    onOkClick(): void {\n        this.triggerEvent(\"select\");\n    }\n    \n    \n    // bindKeyPresses(): void {\n    //     $(document).on(\"keydown\", e => {\n    //         if (e.keyCode == KEY_CODES.enter) {\n    //             e.preventDefault();\n    //             this.onOkClick();\n    //         } else\n    //         if (e.keyCode == KEY_CODES.escape) {\n    //             e.preventDefault();\n    //             this.onCloseClick();\n    //         }\n    //     });\n    // }\n    \n    \n    \n    /////////////////\n    // other\n    /////////////////\n    focus() {\n        let focusedOrDefault = this.getFocusedElementOrDefault();\n        \n        // this.switchToPanel(this.getFocusedElementOrDefault(), true);\n    }\n    \n    refreshFocus() {\n        let fe = this.getFocusedElement();\n        if (fe == FocusedElement.FILES_LIST) {\n            if ($(document.activeElement).closest(\".files-list-container\").get(0) != this.active.$container.get(0)) {\n                this.active.$container.focus();\n            }\n        }\n        else if (fe == null) {\n            this.sidebar.$container.focus();\n        }\n    }\n    \n    getFocusedElementFromEl($ae: JQuery): FocusedElement {\n        if ($ae.closest(\".sidebar-container\").length > 0) {\n            return FocusedElement.SIDEBAR;\n        }\n\n        if ($ae.closest(\".lists-container\").length > 0) {\n            return FocusedElement.FILES_LIST;\n        }\n        return null;\n    }\n    \n    getFocusedElement(): FocusedElement {\n        return this.getFocusedElementFromEl($(<HTMLElement>document.activeElement));\n    }\n    \n    getFocusedElementOrDefault(): FocusedElement {\n        let fe = this.getFocusedElement();\n        return fe == null ? (this.lastFocusedElement == null ? FocusedElement.SIDEBAR : this.lastFocusedElement) : fe;\n    }\n    \n    onKeydown(event: KeyboardEvent): void {\n        if (event.keyCode == webUtils.KEY_CODES.tab && !(event.ctrlKey || event.metaKey)) {\n            event.preventDefault();\n            let fe = this.getFocusedElementOrDefault();\n            if (event.shiftKey) {\n                if (fe == FocusedElement.SIDEBAR) {\n                    this.switchToPanel(FocusedElement.FILES_LIST, true);\n                }\n                else if (fe == FocusedElement.FILES_LIST) {\n                    this.switchToPanel(FocusedElement.SIDEBAR, true);\n                }\n            }\n            else {\n                if (fe == FocusedElement.SIDEBAR) {\n                    this.switchToPanel(FocusedElement.FILES_LIST, true);\n                }\n                else if (fe == FocusedElement.FILES_LIST) {\n                    this.switchToPanel(FocusedElement.SIDEBAR, true);\n                }\n            }\n        }\n        else if (event.keyCode == webUtils.KEY_CODES.escape) {\n            this.onCloseClick();\n        }\n        else if (document.activeElement == document.body) {\n            if (this.lastFocusedElement == FocusedElement.SIDEBAR) {\n                this.sidebar.onKeydown(event);\n                this.sidebar.$container.focus();\n            }\n            else if (this.lastFocusedElement == FocusedElement.FILES_LIST) {\n                (<any>this.active).onKeydown(event);\n                this.active.$container.focus();\n            }\n        }\n        else if ((event.ctrlKey || event.metaKey) && (event.keyCode == webUtils.KEY_CODES.c || event.keyCode == webUtils.KEY_CODES.v || event.keyCode == webUtils.KEY_CODES.x) && $(event.target).closest(\".section-files\").length == 0) {\n            if (this.lastFocusedElement != FocusedElement.FILES_LIST) {\n                (<any>this.active).onKeydown(event);\n            }\n        }\n    }\n    \n    switchToPanel(fe: FocusedElement, showHighlight: boolean) {\n        this.$main.find(\".focus-hightlight\").remove();\n        let $highlight = $('<div class=\"focus-hightlight\"></div>');\n        let currentFe = this.getFocusedElement();\n\n        if (currentFe != fe) {\n            if (fe == FocusedElement.SIDEBAR) {\n                this.sidebar.$container.focus();\n            }\n            else if (fe == FocusedElement.FILES_LIST) {\n                this.splitter.$right.focus();\n                this.active.$container.focus();\n            }\n        }\n        if (showHighlight) {\n            if (fe == FocusedElement.SIDEBAR) {\n                this.splitter.$left.append($highlight);\n            }\n            else if (fe == FocusedElement.FILES_LIST) {\n                this.splitter.$right.append($highlight);\n            }\n        }\n        setTimeout(() => {\n            $highlight.remove();\n        }, 500);\n    }\n    \n    switchFocusToFilesList(showHighlight: boolean): void {\n        if (!this.active) {\n            this.switchToFilesListAfterActivateFiles = { highlight: showHighlight };\n            return;\n        }\n        this.switchToPanel(FocusedElement.FILES_LIST, showHighlight);\n    }\n    \n    switchFocusToSidebar(showHighlight: boolean): void {\n        this.switchToPanel(FocusedElement.SIDEBAR, showHighlight);\n    }\n    \n    activateFiles(id: string) {\n        if (!(id in this.filesLists)) {\n            this.$modulesContainer.find(\".lists-container\").children().each((_i, x) => {\n                $(x).toggleClass(\"vhidden\", true);\n            });\n            return this.createFilesList(id)\n            .then(() => {\n                this.customizeActions(this.filesLists[id].$container);\n                this.active = this.filesLists[id];\n                this.refreshFocus();\n                if (this.switchToFilesListAfterActivateFiles) {\n                    this.switchToPanel(FocusedElement.FILES_LIST, this.switchToFilesListAfterActivateFiles.highlight);\n                }\n            })\n        }\n        else {\n            this.customizeActions(this.filesLists[id].$container);\n            this.$modulesContainer.find(\".lists-container\").children().each((_i, x) => {\n                let $x = $(x);\n                $x.toggleClass(\"vhidden\", $x.data(\"list-id\") != id);\n            });\n            this.active = this.filesLists[id];\n\n            this.refreshFocus();\n            if (this.switchToFilesListAfterActivateFiles) {\n                this.switchToPanel(FocusedElement.FILES_LIST, this.switchToFilesListAfterActivateFiles.highlight);\n            }\n        }\n\n    }\n\n    /////////////////////////////\n    //// REMOTE SECTIONS ////////\n    /////////////////////////////\n\n\n    expandRemoteSectionsList(host: string, hostHash: string): void {\n        if (this.isRemoteHostVisible(hostHash)) {\n            this.toggleRemoteHost(hostHash, false);\n            return;\n        }\n        this.sidebar.showHostLoading(hostHash, false);\n        Q().then(() => {\n            if (! this.remoteServers) {\n                this.remoteServers = {};\n            }\n            if (hostHash in this.remoteServers) {\n                return;\n            }\n            let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n\n            if (! this.remoteListsExists(hostHash)) {\n                return Q().then(() => {\n                    $hostElement.parent().append($(\"<div class='remote-sections' data-host-id='\" + hostHash + \"'></div>\"));\n                    $hostElement.parent().append($(\"<div class='remote-conversations' data-host-id='\" + hostHash + \"'></div>\"));\n        \n                    let hostModel: HostEntryModel = {\n                        host: host,\n                        sectionsList: this.addComponent(\"remoteSectionsList-\" + hostHash, new component.remotesectionlist.RemoteSectionListView(this, {\n                            extList: {template: null}\n                        })),\n                        conv2List: this.addComponent(\"remoteConv2List-\" + hostHash, new component.remoteconv2list.RemoteConv2ListView(this, {\n                            personsView: this.personsComponent,\n                            extList: {template: null}\n                        }))\n                    };\n                    hostModel.sectionsList.sections.$container = $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\");\n                    hostModel.conv2List.conversations.$container = $hostElement.parent().find(\".remote-conversations[data-host-id='\" + hostHash + \"']\");\n                    \n                    this.sidebar.remoteSectionLists[hostHash] = hostModel.sectionsList;\n                    this.sidebar.remoteConv2Lists[hostHash] = hostModel.conv2List;\n        \n                    this.remoteServers[hostHash] = hostModel;\n                    return Q.all([\n                        hostModel.sectionsList.triggerInit(),\n                        hostModel.conv2List.triggerInit()\n                    ])        \n                })\n            }\n\n        })\n        .then(() => {\n            this.toggleRemoteHost(hostHash, true);\n        })\n    }\n\n    toggleRemoteHost(hostHash: string, visible: boolean) {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\").toggleClass(\"hide\", !visible);\n        $hostElement.parent().find(\".remote-conversations[data-host-id='\" + hostHash + \"']\").toggleClass(\"hide\", !visible);\n        this.sidebar.hostList.toggleHostElementIsExpanded(hostHash, visible);\n    }\n\n    isRemoteHostVisible(hostHash: string): boolean {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        return ! $hostElement.find(\".fa.expanded\").hasClass(\"hide\");\n    }\n    \n    remoteListsExists(hostHash: string): boolean {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        let remoteSectionsExists = $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\").length > 0;\n        return remoteSectionsExists;\n    }\n}\n\n(<any>FileChooserWindowView.prototype).className = \"com.privmx.plugin.notes2.window.filechooser.FileChooserWindowView\";"],"sourceRoot":"../../../src"}