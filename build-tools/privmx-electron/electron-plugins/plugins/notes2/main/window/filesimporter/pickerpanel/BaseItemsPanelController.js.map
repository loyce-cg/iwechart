{"version":3,"sources":["window/filesimporter/pickerpanel/BaseItemsPanelController.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAAyD;AAOzD;IAA6D,4CAAuE;IAShI,kCAAY,MAAwC,EAAS,gBAAsD;QAAnH,YACI,kBAAM,MAAM,CAAC,SAmBhB;QApB4D,sBAAgB,GAAhB,gBAAgB,CAAsC;QAE/G,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,KAAI,CAAC,qBAAqB,GAAG,KAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC5G,KAAI,CAAC,oBAAoB,GAAG,KAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,eAAe,CAAC,KAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;QACnI,KAAI,CAAC,uBAAuB,GAAG,KAAI,CAAC,YAAY,CAAC,oBAAoB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,kBAAkB,CAAC,KAAI,CAAC,oBAAoB,EAAE,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC,CAAC;QAExK,KAAI,CAAC,qBAAqB,GAAG,KAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,gBAAgB,CAAC,KAAI,CAAC,uBAAuB,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC,CAAC;QACnK,KAAI,CAAC,qBAAqB,GAAG,KAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,oBAAoB,CAAC,KAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAC1I,KAAI,CAAC,wBAAwB,GAAG,KAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,IAAI,gBAAK,CAAC,UAAU,CAAC,mBAAmB,CAAO,KAAI,CAAC,qBAAqB,EAAE,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC,CAAC;QAEnL,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,YAAY,CAAC,OAAO,EAAE,KAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,KAAI,EAAE,KAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QACjI,KAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;QAG1B,KAAI,CAAC,mBAAmB,CAAC,KAAI,CAAC,qBAAqB,CAAC,WAAW,EAAE,UAAC,KAAK;YACnE,KAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;;IAEP,CAAC;IAEM,oDAAiB,GAAxB,UAAyB,UAA8C;QACnE,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;IACzD,CAAC;IAOL,+BAAC;AAAD,CAxCA,AAwCC,CAxC4D,iBAAM,CAAC,IAAI,CAAC,yBAAyB,GAwCjG;AAxCqB,4DAAwB","file":"BaseItemsPanelController.js","sourcesContent":["import {component, utils, window, Types} from \"pmc-mail\";\n\nexport interface Model {\n    someData: string;\n}\n\n\nexport abstract class BaseItemsPanelController<T, U> extends window.base.WindowComponentController<window.base.BaseWindowController>{\n    itemsMergedCollection: utils.collection.MergedCollection<T>;\n    itemsProxyCollection: utils.collection.ProxyCollection<T>;\n    itemsFilteredCollection: utils.collection.FilteredCollection<T>;\n    itemsTransformCollection: utils.collection.TransformCollection<U, T>;\n    itemsSortedCollection: utils.collection.SortedCollection<T>;\n    itemsActiveCollection: utils.collection.WithActiveCollection<T>;\n    items: component.extlist.ExtListController<U>;\n\n    constructor(parent: window.base.BaseWindowController, public personsComponent:  component.persons.PersonsController) {\n        super(parent);\n        this.ipcMode = true;\n\n        this.itemsMergedCollection = this.addComponent(\"mergedCollection\", new utils.collection.MergedCollection());\n        this.itemsProxyCollection = this.addComponent(\"proxyCollection\", new utils.collection.ProxyCollection(this.itemsMergedCollection));\n        this.itemsFilteredCollection = this.addComponent(\"filteredCollection\", new utils.collection.FilteredCollection(this.itemsProxyCollection, this.filterEntry.bind(this)));\n    \n        this.itemsSortedCollection = this.addComponent(\"sortedCollection\", new utils.collection.SortedCollection(this.itemsFilteredCollection, this.sortEntry.bind(this)));\n        this.itemsActiveCollection = this.addComponent(\"activeCollection\", new utils.collection.WithActiveCollection(this.itemsSortedCollection));\n        this.itemsTransformCollection = this.addComponent(\"transformCollection\", new utils.collection.TransformCollection<U, T>(this.itemsActiveCollection, this.convertEntry.bind(this)));\n\n        this.items = this.addComponent(\"items\", this.componentFactory.createComponent(\"extlist\", [this, this.itemsTransformCollection]));\n        this.items.ipcMode = true;\n\n\n        this.registerChangeEvent(this.itemsActiveCollection.changeEvent, (event) => {\n            this.onActiveCollectionChange(event);\n        });\n\n    }\n\n    public addBaseCollection(collection: utils.collection.BaseCollection<T>): void {\n        this.itemsMergedCollection.addCollection(collection);\n    }\n\n    protected abstract filterEntry(entry: T): boolean;\n    protected abstract convertEntry(entry: T): U;\n    protected abstract sortEntry(a: U, b: U): number;\n    protected abstract onActiveCollectionChange(event: Types.utils.collection.CollectionEvent<T>): void;\n\n}"],"sourceRoot":"../../../../src"}