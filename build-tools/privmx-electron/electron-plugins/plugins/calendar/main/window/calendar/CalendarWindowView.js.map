{"version":3,"sources":["window/calendar/CalendarWindowView.ts"],"names":[],"mappings":"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","file":"CalendarWindowView.js","sourcesContent":["import * as web from \"pmc-web\";\nimport { func as mainTemplate } from \"./template/main.html\";\nimport { Model, CalendarWindowController } from \"./CalendarWindowController\";\nimport Q = web.Q;\nimport $ = web.JQuery;\nimport { CalendarPanelView } from \"../../component/calendarPanel/CalendarPanelView\";\nimport { TaskPanelView } from \"privfs-mail-client-tasks-plugin/src/component/taskPanel/TaskPanelView\";\nimport { DatePickerView } from \"../../component/datePicker/DatePickerView\";\nimport { WebRequest } from \"electron\";\nconst ResizeObserverPolyfill = require(\"resize-observer-polyfill\");\n\nconst enum ACTIVE_PANEL {\n    sidebar = 0,\n    calendar1 = 1,\n    calendar2 = 2,\n    preview = 3,\n}\n\nexport interface HostEntryModel {\n    host: string;\n    sectionsList: web.component.remotesectionlist.RemoteSectionListView;\n    conv2List: web.component.remoteconv2list.RemoteConv2ListView;\n}\n\nexport class CalendarWindowView extends web.window.base.BaseWindowView<Model> {\n    \n    static readonly SIDEBAR_MIN_WIDTH = 100;\n    static readonly CALENDAR1_MIN_WIDTH = 340;\n    static readonly CALENDAR1_MIN_HEIGHT = 100;\n    static readonly CALENDAR2_MIN_WIDTH = 100;\n    static readonly CALENDAR2_MIN_HEIGHT = 100;\n    static readonly PREVIEW_MIN_WIDTH = 100;\n    static readonly PREVIEW_MIN_HEIGHT = 50;\n    \n    verticalSplitter: web.component.splitter.SplitterView;\n    verticalSplitter2: web.component.splitter.SplitterView;\n    horizontalSplitter: web.component.splitter.SplitterView;\n    calendarsSplitter: web.component.splitter.SplitterView;\n    $settingsMenu: JQuery;\n    $sidebar: JQuery;\n    $calendars: JQuery;\n    $calendar1: JQuery;\n    $calendar2: JQuery;\n    $preview: JQuery;\n    $disabledSectionContainer: JQuery;\n    calendar1Panels: { [key: string]: CalendarPanelView } = {};\n    calendar2Panels: { [key: string]: CalendarPanelView } = {};\n    previewPanel: TaskPanelView;\n    sectionsList: web.component.sectionlist.SectionListView;\n    sidebar: web.component.sidebar.SidebarView;\n    personsComponent: web.component.persons.PersonsView;\n    personTooltip: web.component.persontooltip.PersonTooltipView;\n    notifications: web.component.notification.NotificationView;\n    infoTooltip: web.component.infotooltip.InfoTooltip;\n    sectionTooltip: web.component.sectiontooltip.SectionTooltipView;\n    datePicker: DatePickerView;\n    disabledSection: web.component.disabledsection.DisabledSectionView;\n    initializedDeferred: Q.Deferred<void> = Q.defer();\n    activeProjectId1: string = null;\n    activeProjectId2: string = null;\n    activeProjectHostHash1: string = null;\n    activeProjectHostHash2: string = null;\n    pendingEnsureCorrectPanelSizes: boolean = false;\n    \n    _showPreviewPanel: boolean;\n    _horizontalTaskLayout: boolean;\n    _showDayPreviewPanel: boolean;\n    \n    remoteServers: {[hostHash: string]: HostEntryModel} = {};\n\n    constructor(parent: web.Types.app.ViewParent) {\n        super(parent, mainTemplate);\n        if (!(<any>window).ResizeObserver) {\n            (<any>window).ResizeObserver = ResizeObserverPolyfill;\n        }\n        \n        this.verticalSplitter = this.addComponent(\"verticalSplitter\", new web.component.splitter.SplitterView(this, {\n            type: \"vertical\",\n            handlePlacement: \"right\",\n            handleDot: true,\n            firstPanelMinSize: CalendarWindowView.SIDEBAR_MIN_WIDTH,\n            secondPanelMinSize: () => {\n                let taken = 0;\n                taken += CalendarWindowView.CALENDAR1_MIN_WIDTH;\n                if (this.verticalSplitter2 && this.verticalSplitter2.$right && this.verticalSplitter2.$right.children().length > 0 && this._showPreviewPanel) {\n                    taken += this.verticalSplitter2.$right.outerWidth();\n                }\n                if (this.$calendars.hasClass(\"two-calendars\")) {\n                    taken += this.calendarsSplitter.$right.outerWidth();\n                }\n                return taken;\n            },\n        }));\n        this.verticalSplitter2 = this.addComponent(\"verticalSplitter2\", new web.component.splitter.SplitterView(this, {\n            type: \"vertical\",\n            handlePlacement: \"right\",\n            handleDot: true,\n            flip: true,\n            firstPanelMinSize: () => {\n                if (this._showDayPreviewPanel) {\n                    return CalendarWindowView.CALENDAR2_MIN_WIDTH + this.calendarsSplitter.$left.outerWidth();\n                }\n                else {\n                    return CalendarWindowView.CALENDAR2_MIN_WIDTH;\n                }\n            },\n            secondPanelMinSize: CalendarWindowView.PREVIEW_MIN_WIDTH,\n        }));\n        this.horizontalSplitter = this.addComponent(\"horizontalSplitter\", new web.component.splitter.SplitterView(this, {\n            type: \"horizontal\",\n            handlePlacement: \"bottom\",\n            handleDot: true,\n            flip: true,\n            firstPanelMinSize: () => {\n                return Math.max(CalendarWindowView.CALENDAR1_MIN_HEIGHT, this.$calendars.hasClass(\"two-calendars\") ? CalendarWindowView.CALENDAR2_MIN_HEIGHT : 0);\n            },\n            secondPanelMinSize: CalendarWindowView.PREVIEW_MIN_HEIGHT,\n        }));\n        this.calendarsSplitter = this.addComponent(\"calendarsSplitter\", new web.component.splitter.SplitterView(this, {\n            type: \"vertical\",\n            handlePlacement: \"right\",\n            handleDot: true,\n            flip: false,\n            firstPanelMinSize: CalendarWindowView.CALENDAR1_MIN_WIDTH,\n            secondPanelMinSize: CalendarWindowView.CALENDAR2_MIN_WIDTH,\n        }));\n        this.personsComponent = this.addComponent(\"personsComponent\", new web.component.persons.PersonsView(this, this.helper));\n        this.personTooltip = new web.component.persontooltip.PersonTooltipView(this.templateManager, this.personsComponent);\n        this.sectionTooltip = this.addComponent(\"sectiontooltip\", new web.component.sectiontooltip.SectionTooltipView(this));\n        this.notifications = this.addComponent(\"notifications\", new web.component.notification.NotificationView(this, {xs: true}));\n        this.disabledSection = this.addComponent(\"disabled-section\", new web.component.disabledsection.DisabledSectionView(this));\n        this.sidebar = this.addComponent(\"sidebar\", new web.component.sidebar.SidebarView(this, {\n            conv2List: {\n                personsView: this.personsComponent,\n                extList: {\n                    template: null\n                }\n            },\n            conv2Splitter: null,\n            customElementList: {\n                extList: {\n                    template: null,\n                    onAfterListRender: this.onAfterRenderCustomList.bind(this)\n                }\n            },\n            sectionList: {\n                extList: {\n                    template: null\n                }\n            },\n            customSectionList: {\n                extList: {\n                    template: null\n                }\n            },\n        }));\n        this.datePicker = this.addComponent(\"datePicker\", new DatePickerView(this));\n        this.bindEvent(this.sidebar.customElementList.customElements, \"ext-list-change\", this.personsComponent.refreshAvatars.bind(this.personsComponent));\n        this.bindEvent(this.sidebar.customElementList.customElementsA, \"ext-list-change\", this.personsComponent.refreshAvatars.bind(this.personsComponent));\n        this.turnTimeAgoRefresher(5 * 60 * 1000);\n        \n        web.Starter.dispatchEvent<any>({\n            type: \"request-task-panel-view\",\n            parent: this,\n            name: \"task-panel-view\",\n        });\n    }\n    \n    registerPreview(name: string, el: TaskPanelView): void {\n        this.previewPanel = this.addComponent(\"previewPanel\", el);\n    }\n    \n    onAfterRenderCustomList(): void {\n        this.personsComponent.refreshAvatars();\n    }\n    \n    initWindow(model: Model): any {\n        this.setModel(model);\n        \n        this.$settingsMenu = this.$main.find(\".context-menu-settings\");\n        this.$sidebar = this.$main.find(\".panel-sidebar\");\n        this.$calendar1 = this.$main.find(\".panel-calendar1\");\n        this.$calendar2 = this.$main.find(\".panel-calendar2\");\n        this.$preview = this.$main.find(\".panel-preview\");\n        \n        this.$calendar1.on(\"click\", this.onCalendar1PanelClick.bind(this));\n        this.$calendar2.on(\"click\", this.onCalendar2PanelClick.bind(this));\n        this.$preview.on(\"click\", this.onPreviewPanelClick.bind(this));\n        this.$body.on(\"click\", \".close-day-preview-btn\", this.onCloseDayPreviewClick.bind(this));\n        this.bindKeyboardEvents();\n        \n        if ((<any>window).ResizeObserver) {\n            let resizeObserver = new (<any>window).ResizeObserver(() => {\n                this.updateCalendar1HeaderRight();\n            });\n            resizeObserver.observe(this.$calendar2[0]);\n        }\n        \n        if (this._showPreviewPanel) {\n            this.$main.children(\".right-buttons\").children().addClass(\"gray\");\n        }\n        else {\n            this.$main.children(\".right-buttons\").children().removeClass(\"gray\");\n        }\n        \n        this.notifications.$container = this.$main.find(\".notifications-container-wrapper\");\n        return Q().then(() => {\n            this.verticalSplitter.$container = this.$main.find(\".panels\");\n            return this.verticalSplitter.triggerInit();\n        })\n        .then(() => {\n            let $container = $(\"<div class=\\\"calendar-container\\\"></div>\");\n            this.verticalSplitter.$right.append($container);\n            this.verticalSplitter2.$container = $container;\n            return this.verticalSplitter2.triggerInit();\n        })\n        .then(() => {\n            this.horizontalSplitter.$container = this.verticalSplitter2.$left;\n            return this.horizontalSplitter.triggerInit();\n        })\n        .then(() => {\n            this.$calendars = $(\"<div class='calendars one-calendar'></div>\");\n            this.horizontalSplitter.$top.append(this.$calendars);\n            this.horizontalSplitter.$top.css(\"overflow\", \"hidden\");\n            if (!this._showPreviewPanel) {\n                this.hideTaskPreviewPanel();\n            }\n            this.updatePreviewLocation(model.horizontalTaskLayout);\n            this.sidebar.$container = this.verticalSplitter.$left;\n            this.sidebar.$container.addClass(\"sidebar-container\");\n            this.personsComponent.$main = this.$main;\n            return Q.all([\n                this.personsComponent.triggerInit(),\n                this.notifications.triggerInit(),\n            ]);\n        })\n        .then(() => {\n            this.calendarsSplitter.$container = this.$calendars;\n            return this.calendarsSplitter.triggerInit();\n        })\n        .then(() => {\n            this.calendarsSplitter.$left.append(this.$calendar1);\n            this.calendarsSplitter.$right.append(this.$calendar2);\n            this.sidebar.$container.on(\"click\", this.onSidebarClick.bind(this));\n            return this.sidebar.triggerInit();\n        })\n        .then(() => {\n            this.verticalSplitter.$handle.on(\"mousedown\", () => {\n                this.setFirstPanelResizable(true);\n            });\n            this.verticalSplitter2.$handle.on(\"mousedown\", () => {\n                this.setFirstPanelResizable(false);\n            });\n        })\n        .then(() => {\n            this.$main.focus();\n            this.grabFocus();\n            this.personTooltip.init(this.sidebar.$container);\n            this.personsComponent.refreshAvatars();\n            this.makeCustomScroll(this.verticalSplitter.$left.find(\".sidebar\"));\n            this.initializedDeferred.resolve();\n        })\n        .then(() => {\n            this.$disabledSectionContainer = $(\"<div class='disabled-section hidden'></div>\");\n            this.verticalSplitter.$right.append(this.$disabledSectionContainer);\n            this.disabledSection.$container = this.$disabledSectionContainer;\n            this.disabledSection.triggerInit();\n        })\n        .then(() => {\n            this.previewPanel.$container = this.$preview;\n            return this.previewPanel.triggerInit();\n        })\n        .then(() => {\n            this.sectionTooltip.refreshAvatars = this.personsComponent.refreshAvatars.bind(this.personsComponent);\n            this.sidebar.usersListTooltip.refreshAvatars = this.personsComponent.refreshAvatars.bind(this.personsComponent);\n            this.sectionTooltip.$container = this.$main;\n            return this.sectionTooltip.triggerInit();\n        }).then(() => {\n            this.changeTaskPreviewPanelVisibility(this._showPreviewPanel);\n            this.updatePreviewLocation(this._horizontalTaskLayout);\n            this.calendarsSplitter.updateRelativeHandlePosition();\n        }).then(() => {\n            let $cont = $(\"<div class='common-datepicker-container'></div>\");\n            this.$body.find(\".calendars\").append($cont);\n            this.datePicker.$container = $cont;\n            return this.datePicker.triggerInit();\n        });\n    }\n    \n    checkInit(): Q.Promise<void> {\n        return this.initializedDeferred.promise;\n    }\n    \n    setModel(model: Model) {\n        this._showPreviewPanel = model.showTaskPreviewPanel;\n        this._horizontalTaskLayout = model.horizontalTaskLayout;\n    }\n    \n    onSearchChanged(searchOn: boolean, refreshAvatars: boolean) {\n        if (refreshAvatars) {\n            this.personsComponent.refreshAvatars();\n        }\n        this.$main.toggleClass(\"search-on\", searchOn);\n        this.sidebar.refreshInfoTooltips();\n    }\n    \n    toggleDisabledSection(show: boolean): void {\n        this.verticalSplitter.$right.children(\".calendar-container\").toggleClass(\"hidden\", show);\n        this.$disabledSectionContainer.toggleClass(\"hidden\", !show);\n    }\n    \n    setFirstPanelResizable(resizable: boolean): void {\n        if (this.calendarsSplitter.flip == resizable) {\n            return;\n        }\n        this.calendarsSplitter.flip = resizable;\n        let size = !this.calendarsSplitter.flip ? this.calendarsSplitter.$component.outerWidth() - this.calendarsSplitter.relativeHandlePosition - 10 : this.calendarsSplitter.relativeHandlePosition + 10;\n        size = Math.max(size, typeof(this.calendarsSplitter.firstPanelMinSize) == \"function\" ? this.calendarsSplitter.firstPanelMinSize() : this.calendarsSplitter.firstPanelMinSize);\n        this.calendarsSplitter.setFirstElementSize(size);\n    }\n    \n    fixPanelsArrangement(): void {\n    }\n    \n    \n    \n    \n    \n    \n    /****************************************\n    ************* Preview panel *************\n    ****************************************/\n    enableDayPreviewPanel(): void {\n        this._showDayPreviewPanel = true;\n        this.$calendars.removeClass(\"one-calendar\");\n        this.$calendars.addClass(\"two-calendars\");\n        this.updateCalendar1HeaderRight();\n        this.fixPanelsArrangement();\n        this.ensureCorrectPanelIsFocused();\n        this.updateCalendarPanelsVisibility(2);\n    }\n    \n    hideDayPreviewPanel(): void {\n        this._showDayPreviewPanel = false;\n        this.$calendars.addClass(\"one-calendar\");\n        this.$calendars.removeClass(\"two-calendars\");\n        this.$calendar1.find(\".mode\").css(\"width\", \"auto\").css(\"width\", \"100%\"); // Fix Chrome bug\n        this.updateCalendar1HeaderRight();\n        this.ensureCorrectPanelIsFocused();\n        this.updateCalendarPanelsVisibility(2);\n    }\n    \n    changeDayPreviewPanelVisibility(show: boolean) {\n        if (this._showDayPreviewPanel == show) {\n            return;\n        }\n        if (show) {\n            this.enableDayPreviewPanel();\n        }\n        else {\n            this.hideDayPreviewPanel();\n        }\n        this.ensureCorrectPanelSizes();\n    }\n    \n    showTaskPreviewPanel(): void {\n        this._showPreviewPanel = true;\n        let $el = this.$calendar1.closest(\".component-splitter-panel-top\");\n        $el.addClass(\"show-task-preview-panel\");\n        $el.removeClass(\"hide-task-preview-panel\");\n        $el.closest(\".component-splitter-panel-left\").addClass(\"show-task-preview-panel\");\n        $el.closest(\".component-splitter-panel-left\").removeClass(\"hide-task-preview-panel\");\n        this.fixPanelsArrangement();\n        this.ensureCorrectPanelIsFocused();\n    }\n    \n    hideTaskPreviewPanel(): void {\n        this._showPreviewPanel = false;\n        let $el = this.$calendar1.closest(\".component-splitter-panel-top\");\n        $el.removeClass(\"show-task-preview-panel\");\n        $el.addClass(\"hide-task-preview-panel\");\n        $el.closest(\".component-splitter-panel-left\").removeClass(\"show-task-preview-panel\");\n        $el.closest(\".component-splitter-panel-left\").addClass(\"hide-task-preview-panel\");\n        this.ensureCorrectPanelIsFocused();\n    }\n    \n    changeTaskPreviewPanelVisibility(show: boolean) {\n        if (show) {\n            this.showTaskPreviewPanel();\n        }\n        else {\n            this.hideTaskPreviewPanel();\n        }\n    }\n    \n    updatePreviewLocation(horizontalLayout: boolean): void {\n        let $horizontalSplitter = this.$calendar1.closest(\".component-splitter-panel-top\");\n        let $verticalSplitter = $horizontalSplitter.closest(\".component-splitter-panel-left\");\n        $horizontalSplitter.toggleClass(\"show-preview\", horizontalLayout);\n        $horizontalSplitter.toggleClass(\"hide-preview\", !horizontalLayout);\n        $verticalSplitter.toggleClass(\"show-preview\", !horizontalLayout);\n        $verticalSplitter.toggleClass(\"hide-preview\", horizontalLayout);\n        if (horizontalLayout) {\n            this.horizontalSplitter.$bottom.append(this.$preview);\n        }\n        else {\n            this.verticalSplitter2.$right.append(this.$preview);\n        }\n        this.fixPanelsArrangement();\n    }\n    \n    updateCalendar1HeaderRight(): void {\n        // if (!this.$calendars) {\n        //     return;\n        // }\n        // let twoCalendars = this.$calendars.hasClass(\"two-calendars\");\n        // let right = twoCalendars ? this.$calendar2.width() : 0;\n        // this.$calendar1.find(\".top\").css(\"right\", -Math.ceil(right));\n        // if (!twoCalendars) {\n        //     Q().then(() => {\n        //         this.setFirstPanelResizable(true);\n        //     });\n        // }\n    }\n    \n    ensureCorrectPanelSizes(onTabOpen: boolean = false): void {\n        if (this.calendarsSplitter.$component.is(\":visible\")) {\n            let size = this.calendarsSplitter.flip ? this.calendarsSplitter.$component.outerWidth() - this.calendarsSplitter.relativeHandlePosition - 10 : this.calendarsSplitter.relativeHandlePosition + 10;\n            if (onTabOpen) {\n                size = !this.calendarsSplitter.flip ? this.calendarsSplitter.$component.outerWidth() - this.calendarsSplitter.relativeHandlePosition - 10 : this.calendarsSplitter.relativeHandlePosition + 10;\n            }\n            size = Math.max(size, typeof(this.calendarsSplitter.firstPanelMinSize) == \"function\" ? this.calendarsSplitter.firstPanelMinSize() : this.calendarsSplitter.firstPanelMinSize);\n            this.calendarsSplitter.setFirstElementSize(size);\n        }\n        else {\n            this.pendingEnsureCorrectPanelSizes = true;\n        }\n    }\n    \n    setIsCalendarTabOpen(isOpen: boolean): void {\n        if (this.pendingEnsureCorrectPanelSizes && isOpen) {\n            this.pendingEnsureCorrectPanelSizes = false;\n            this.ensureCorrectPanelSizes(true);\n        }\n    }\n    \n    updateCalendarPanelsVisibility(onlyCalendar: 1|2 = null): void {\n        if (onlyCalendar !== 2) {\n            let activeId = this.getCalendarPanelKey(this.activeProjectHostHash1, this.activeProjectId1);\n            for (let id in this.calendar1Panels) {\n                let cpc = this.calendar1Panels[id];\n                cpc.setIsVisible(id == activeId,\"left\");\n            }\n        }\n        if (onlyCalendar !== 1) {\n            let activeId = this.getCalendarPanelKey(this.activeProjectHostHash2, this.activeProjectId2);\n            for (let id in this.calendar2Panels) {\n                let cpc = this.calendar2Panels[id];\n                cpc.setIsVisible(this._showDayPreviewPanel && id == activeId,\"right\");\n            }\n        }\n    }\n    \n    \n    \n    \n    \n    /****************************************\n    *************** Keyboard ****************\n    ****************************************/\n    bindKeyboardEvents(): void {\n        $(document).on(\"keydown\", this.keyboardHandler.bind(this));\n    }\n    \n    keyboardHandler(e: KeyboardEvent): void {\n        if ((e.key == \"ArrowLeft\" || e.key == \"ArrowRight\") && (e.altKey && (e.ctrlKey || e.metaKey))) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.triggerEvent(\"history\" + e.key);\n        }\n        \n        if (e.key == \"Tab\") {\n            if (!e.ctrlKey && !e.metaKey) {\n                e.preventDefault();\n                // Tab\n                if (!e.shiftKey) {\n                    this.focusNextPanel();\n                }\n                else {\n                    this.focusPrevPanel();\n                }\n            }\n            else {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                var newEvent = new KeyboardEvent(\"keydown\", <any>{\n                    key: \"Tab\",\n                    keyCode: 9,\n                    ctrlKey: true,\n                    shiftKey: e.shiftKey,\n                    bubbles: true,\n                });\n                (<any>parent.frameElement).contentDocument.dispatchEvent(newEvent);\n            }\n        }\n        else if ((e.key == \"r\" && e.ctrlKey) || e.key == \"F5\") {\n            e.preventDefault();\n            this.triggerEvent(\"refresh\");\n        }\n    }\n    \n    \n    \n    \n    \n    /****************************************\n    *********** Focus management ************\n    ****************************************/\n    activePanelId: ACTIVE_PANEL = ACTIVE_PANEL.sidebar;\n        \n    focusNextPanel(): void {\n        this.switchToPanel(this.activePanelId + 1, true, 1);\n    }\n    \n    focusPrevPanel(): void {\n        this.switchToPanel(this.activePanelId - 1, true, -1);\n    }\n    \n    switchToPanel(id: number, showHighlight: boolean, direction: number) {\n        let max = 4;\n        let newId = (id + max) % max;\n        \n        this.$main.find(\".focus-highlight\").remove();\n        let $highlight = $('<div class=\"focus-highlight\"></div>');\n        \n        let oldPanelId = this.activePanelId;\n        this.activePanelId = newId < 0 ? newId + max : newId;\n        for (let i = 0; i < 4; ++i) {\n            if ((this.activePanelId == ACTIVE_PANEL.calendar2 && !this._showDayPreviewPanel) || (this.activePanelId == ACTIVE_PANEL.preview && !this._showPreviewPanel)) {\n                this.activePanelId = (this.activePanelId + direction + max) % max;\n            }\n        }\n        if (showHighlight && oldPanelId != this.activePanelId) {\n            let $neigh: JQuery = $();\n            let $toFocus: JQuery = $();\n            if (this.activePanelId == ACTIVE_PANEL.sidebar) {\n                $toFocus = this.$main.find(\".sidebar-container\");\n                $neigh = $toFocus.children(\".sidebar\").first();\n            }\n            else if (this.activePanelId == ACTIVE_PANEL.calendar1) {\n                $neigh = this.$calendar1.children(\".calendarpanel-container.active\");\n                $toFocus = $neigh.children(\".panel\");\n            }\n            else if (this.activePanelId == ACTIVE_PANEL.calendar2) {\n                $neigh = this.$calendar2.children(\".calendarpanel-container.active\");\n                $toFocus = $neigh.children(\".panel\");\n            }\n            else if (this.activePanelId == ACTIVE_PANEL.preview) {\n                $neigh = this.$preview.children(\".component-task-panel-main\");\n                $toFocus = $neigh;\n            }\n            $highlight.insertAfter($neigh);\n            $toFocus.focus();\n        }\n        setTimeout(() => {\n            $highlight.remove();\n        }, 500);\n    }\n    \n    ensureCorrectPanelIsFocused(): void {\n        this.switchToPanel(this.activePanelId, false, 1);\n    }\n    \n    grabFocus(highlight: boolean = true): void {\n        let activePanel = this.activePanelId;\n        this.activePanelId = activePanel == 0 ? activePanel + 1 : activePanel - 1;\n        this.switchToPanel(activePanel, highlight, activePanel == 0 ? 1 : -1);\n    }\n    \n    onSidebarClick(): void {\n        this.switchToPanel(ACTIVE_PANEL.sidebar, false, 0);\n    }\n    \n    onCalendar1PanelClick(): void {\n        this.switchToPanel(ACTIVE_PANEL.calendar1, false, 0);\n    }\n    \n    onCalendar2PanelClick(): void {\n        this.switchToPanel(ACTIVE_PANEL.calendar2, false, 0);\n    }\n    \n    onPreviewPanelClick(): void {\n        this.switchToPanel(ACTIVE_PANEL.preview, false, 0);\n    }\n    \n    onCloseDayPreviewClick(): void {\n        this.triggerEvent(\"closeDayPreview\");\n    }\n    \n    \n    \n    \n    \n    /****************************************\n    ************* CalendarPanel *************\n    ****************************************/\n    createCalendar1Panel(hostHash: string, projectId: string): CalendarPanelView {\n        // console.log(\"createCalendar1Panel\", {hostHash,projectId})\n        let calendarPanelKey = this.getCalendarPanelKey(hostHash, projectId);\n        if (calendarPanelKey in this.calendar1Panels) {\n            return this.calendar1Panels[calendarPanelKey];\n        }\n        let panel = this.addComponent(\"calendar1Panel-\" + calendarPanelKey, new CalendarPanelView(this, this.personsComponent));\n        let $container = $(\"<div class='calendarpanel-container' data-id='\" + projectId + \"' data-host-hash='\" + hostHash + \"'></div>\");\n        this.$calendar1.append($container);\n        panel.$container = $container;\n        panel.triggerInit();\n        this.calendar1Panels[calendarPanelKey] = panel;\n    }\n    \n    openCalendar1Panel(hostHash: string, projectId: string): void {\n        // console.log(\"openCalendar1Panel\", {hostHash,projectId})\n        let needsCustomSelectsFlashing: boolean = false;\n        if (this.activeProjectId1 != null && this.activeProjectId1 != projectId) {\n            needsCustomSelectsFlashing = true;\n        }\n        this.activeProjectId1 = projectId;\n        this.activeProjectHostHash1 = hostHash;\n        \n        let $containers = this.$calendar1.find(\".calendarpanel-container\");\n        let $container = $containers.filter(\"[data-id='\" + projectId + \"'][data-host-hash='\" + hostHash + \"']\");\n        $containers.removeClass(\"active\");\n        $container.addClass(\"active\");\n        this.$main.find(\".panels\").children().children(\".component-splitter-panel-right\").toggleClass(\"hidden\", this.$main.find(\".calendarpanel-container.active\").length == 0);\n        \n        if (needsCustomSelectsFlashing) {\n            this.flashCustomSelects($container);\n        }\n        \n        this.updateCalendarPanelsVisibility(1);\n    }\n    \n    createCalendar2Panel(hostHash: string, projectId: string): CalendarPanelView {\n        // console.log(\"createCalendar2Panel\", {hostHash,projectId})\n        let calendarPanelKey = this.getCalendarPanelKey(hostHash, projectId);\n        if (calendarPanelKey in this.calendar2Panels) {\n            return this.calendar2Panels[calendarPanelKey];\n        }\n        let panel = this.addComponent(\"calendar2Panel-\" + calendarPanelKey, new CalendarPanelView(this, this.personsComponent));\n        let $container = $(\"<div class='calendarpanel-container' data-id='\" + projectId + \"' data-host-hash='\" + hostHash + \"'></div>\");\n        this.$calendar2.append($container);\n        panel.$container = $container;\n        panel.triggerInit();\n        this.calendar2Panels[calendarPanelKey] = panel;\n    }\n    \n    openCalendar2Panel(hostHash: string, projectId: string): void {\n        // console.log(\"openCalendar2Panel\", {hostHash,projectId})\n        this.activeProjectId2 = projectId;\n        this.activeProjectHostHash2 = hostHash;\n        \n        let $containers = this.$calendar2.find(\".calendarpanel-container\");\n        let $container = $containers.filter(\"[data-id='\" + projectId + \"'][data-host-hash='\" + hostHash + \"']\");\n        $containers.removeClass(\"active\");\n        $container.addClass(\"active\");\n        this.$main.find(\".panels\").children().children(\".component-splitter-panel-right\").toggleClass(\"hidden\", this.$main.find(\".calendarpanel-container.active\").length == 0);\n        \n        this.updateCalendarPanelsVisibility(2);\n    }\n    \n    flashCustomSelects($container: JQuery): void {\n        if ($container && $container.length > 0) {\n            const $elem = $container.find(\".top .component-custom-select-main, .top .prev-btn, .top .next-btn, .top .today-btn\");\n            $elem.removeClass(\"fadeInOut\");\n            setTimeout(() => {\n                $elem.addClass(\"fadeInOut\");\n            }, 0);\n        }\n    }\n    \n    expandRemoteSectionsList(host: string, hostHash: string): void {\n        if (this.isRemoteHostVisible(hostHash)) {\n            this.toggleRemoteHost(hostHash, false);\n            return;\n        }\n        let $hostElement: JQuery<HTMLElement>;\n        this.sidebar.showHostLoading(hostHash, false);\n        Q().then(() => {\n            if (! this.remoteServers) {\n                this.remoteServers = {};\n            }\n            if (hostHash in this.remoteServers) {\n                return;\n            }\n            $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n\n            if (! this.remoteListsExists(hostHash)) {\n                return Q().then(() => {\n                    $hostElement.parent().append($(\"<div class='remote-sections' data-host-id='\" + hostHash + \"'></div>\"));\n                    $hostElement.parent().append($(\"<div class='remote-conversations' data-host-id='\" + hostHash + \"'></div>\"));\n\n                    let hostModel: HostEntryModel = {\n                        host: host,\n                        sectionsList: this.addComponent(\"remoteSectionsList-\" + hostHash, new web.component.remotesectionlist.RemoteSectionListView(this, {\n                            extList: {template: null}\n                        })),\n                        conv2List: this.addComponent(\"remoteConv2List-\" + hostHash, new web.component.remoteconv2list.RemoteConv2ListView(this, {\n                            personsView: this.personsComponent,\n                            extList: {template: null}\n                        }))\n                    };\n\n                    hostModel.sectionsList.sections.$container = $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\");\n                    hostModel.conv2List.conversations.$container = $hostElement.parent().find(\".remote-conversations[data-host-id='\" + hostHash + \"']\");\n                    \n                    this.sidebar.remoteSectionLists[hostHash] = hostModel.sectionsList;\n                    this.sidebar.remoteConv2Lists[hostHash] = hostModel.conv2List;\n                    \n                    hostModel.conv2List.conversations.$container.addClass(\"with-assigned-to-prefixes\");\n                    \n                    this.remoteServers[hostHash] = hostModel;\n                    return Q.all([\n                        hostModel.sectionsList.triggerInit(),\n                        hostModel.conv2List.triggerInit()\n                    ])        \n                })\n            }\n        })\n        .then(() => {\n            this.toggleRemoteHost(hostHash, true);\n        })\n    }\n    \n    toggleRemoteHost(hostHash: string, visible: boolean) {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\").toggleClass(\"hide\", !visible);\n        $hostElement.parent().find(\".remote-conversations[data-host-id='\" + hostHash + \"']\").toggleClass(\"hide\", !visible);\n        this.sidebar.hostList.toggleHostElementIsExpanded(hostHash, visible);\n    }\n\n    isRemoteHostVisible(hostHash: string): boolean {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        return ! $hostElement.find(\".fa.expanded\").hasClass(\"hide\");\n    }\n\n    remoteListsExists(hostHash: string): boolean {\n        let $hostElement = this.$main.find(\".host-element[data-host-id='\" + hostHash + \"']\");\n        let remoteSectionsExists = $hostElement.parent().find(\".remote-sections[data-host-id='\" + hostHash + \"']\").length > 0;\n        return remoteSectionsExists;\n    }\n    \n    getCalendarPanelKey(hostHash: string, projectId: string): string {\n        return `${hostHash}--${projectId}`;\n    }\n\n}\n\n(<any>CalendarWindowView.prototype).className = \"com.privmx.plugin.calendar.window.calendar.CalendarWindowView\";"],"sourceRoot":"../../../src"}