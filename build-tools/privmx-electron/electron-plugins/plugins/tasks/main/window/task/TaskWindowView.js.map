{"version":3,"sources":["window/task/TaskWindowView.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,6BAA+B;AAC/B,kDAA6D;AAG7D,yEAAwE;AACxE,IAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACjB;IAAoC,kCAAqC;IAYrE,wBAAY,MAAgC;QAA5C,YACI,kBAAM,MAAM,EAAE,gBAAY,CAAC,SAG9B;QAFG,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,IAAI,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,KAAI,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACxH,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,YAAY,CAAC,WAAW,EAAE,IAAI,6BAAa,CAAC,KAAI,EAAE,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;;IACpG,CAAC;IAED,mCAAU,GAAV,UAAW,KAAY;QAAvB,iBAYC;QAXG,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC;YACZ,KAAI,CAAC,gBAAgB,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC;YACzC,OAAO,KAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;QAC/C,CAAC,CAAC;aACD,IAAI,CAAC;YACF,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC/D,KAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;YAC7B,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;YACpD,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;YAChC,KAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACvB,CAAC,CAAC,CAAA;IACN,CAAC;IAED,kCAAS,GAAT,UAAU,CAAgB;QACtB,IAAI,CAAC,CAAC,GAAG,IAAI,QAAQ,EAAE;YACnB,IAAU,QAAS,CAAC,aAAa,EAAE;gBAC/B,OAAO;aACV;YACD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;SAC9B;IACL,CAAC;IAED,oCAAW,GAAX,UAAY,KAAiB;QACzB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,yBAAyB,CAAC,SAAS,EAAsB,KAAK,CAAC,aAAc,CAAC,IAAI,CAAC,CAAC;IAC7F,CAAC;IAED,qCAAY,GAAZ;QACI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAEL,qBAAC;AAAD,CAlDA,AAkDC,CAlDmC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,GAkDjE;AAlDY,wCAAc;AAmDrB,cAAc,CAAC,SAAU,CAAC,SAAS,GAAG,oDAAoD,CAAC","file":"TaskWindowView.js","sourcesContent":["import * as web from \"pmc-web\";\nimport { func as mainTemplate }  from \"./template/main.html\";\nimport { Model } from \"./TaskWindowController\";\nimport $ = web.JQuery;\nimport { TaskPanelView } from \"../../component/taskPanel/TaskPanelView\";\nimport Q = web.Q;\nexport class TaskWindowView extends web.window.base.BaseWindowView<Model> {\n    \n    $name: JQuery;\n    $description: JQuery;\n    $taskGroupId: JQuery;\n    $assignedTo: JQuery;\n    $type: JQuery;\n    $status: JQuery;\n    $priority: JQuery;\n    taskPanel: TaskPanelView;\n    personsComponent: web.component.persons.PersonsView;\n        \n    constructor(parent: web.Types.app.ViewParent) {\n        super(parent, mainTemplate);\n        this.personsComponent = this.addComponent(\"personsComponent\", new web.component.persons.PersonsView(this, this.helper));\n        this.taskPanel = this.addComponent(\"taskPanel\", new TaskPanelView(this, this.personsComponent));\n    }\n    \n    initWindow(model: Model): any {\n        return Q().then(() => {\n            this.personsComponent.$main = this.$main;\n            return this.personsComponent.triggerInit();\n        })\n        .then(() => {\n            this.taskPanel.$container = this.$main.find(\".task-container\");\n            this.taskPanel.triggerInit();\n            this.$main.on(\"keydown\", this.onKeyDown.bind(this));\n            this.$main.attr(\"tabindex\", -1);\n            this.$main.focus();\n        })\n    }\n    \n    onKeyDown(e: KeyboardEvent): void {\n        if (e.key == \"Escape\") {\n            if ((<any>document)._preventClose) {\n                return;\n            }\n            this.triggerEvent(\"close\");\n        }\n    }\n    \n    onLinkClick(event: MouseEvent): void {\n        event.preventDefault();\n        this.triggerEventInTheSameTick(\"openUrl\", (<HTMLAnchorElement>event.currentTarget).href);\n    }\n    \n    onCloseClick(): void {\n        this.triggerEvent(\"close\");\n    }\n    \n}\n(<any>TaskWindowView.prototype).className = \"com.privmx.plugin.tasks.window.task.TaskWindowView\";"],"sourceRoot":"../../../src"}