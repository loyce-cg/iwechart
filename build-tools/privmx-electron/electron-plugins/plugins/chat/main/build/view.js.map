{"version":3,"sources":["build/view.ts"],"names":[],"mappings":";;AAAA,gEAA6D;AAC7D,yFAA+F;AAC/F,6BAA+B;AAE/B,+EAA8E;AAC9E,iGAAgG;AAChG,IAAI,CAAC,GAAG,mCAAgB,CAAC;AAEzB,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,+BAAc,CAAC,CAAC;AACnD,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,qDAAyB,CAAC,CAAC;AAK9D,GAAG,CAAC,OAAO,CAAC,gBAAgB,CAAmC,MAAM,EAAE;IACnE,IAAI,UAAU,GAAoB,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,aAAa,CAAE,CAAC;IAC3E,IAAI,UAAU,EAAE;QACZ,UAAU,CAAC,gBAAgB,CAAC,6BAAuB,CAAC,CAAC;KACxD;AAEL,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;AAEvB,GAAG,CAAC,OAAO,CAAC,gBAAgB,CAAgF,oBAAoB,EAAE,UAAA,KAAK;IACnI,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,SAAS,IAAI,kDAAkD,EAAE;QAClG,KAAK,CAAC,QAAQ,CAAC,oBAAoB,CAAC;YAChC,IAAI,EAAE,aAAa;YACnB,QAAQ,EAAE,qDAAqD;YAC/D,MAAM,EAAE,WAAW;YACnB,OAAO,EAAE,UAAC,cAAwC,EAAE,QAAgB;gBAChE,OAAO,QAAQ,IAAI,MAAM,IAAI,cAAc,CAAC,UAAU,EAAE,CAAC,MAAM,CAAC,IAAI,IAAI,WAAW,CAAC;YACxF,CAAC;SACJ,CAAC,CAAC;KACN;AACL,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;AAEvB,GAAG,CAAC,OAAO,CAAC,gBAAgB,CAA8F,oBAAoB,EAAE,UAAA,KAAK;IACjJ,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,SAAS,IAAI,gEAAgE,EAAE;QAChH,IAAI,IAAI,GAAG,IAAI,mCAAgB,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QACjF,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,6CAA6C,CAAC,CAAC;QAC5E,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAC/C;AACL,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC","file":"view.js","sourcesContent":["import {ChatWindowView} from \"../window/chat/ChatWindowView\";\nimport {func as chatListElementTemplate} from \"../window/mail/template/chat-list-element.html\";\nimport * as Web from \"pmc-web\";\nimport * as Mail from \"pmc-mail\";\nimport { ChatMessagesView } from \"../component/chatmessages/ChatMessagesView\";\nimport { VideoConferenceWindowView } from \"../window/videoConference/VideoConferenceWindowView\";\nlet c = ChatMessagesView;\n\nWeb.Starter.objectFactory.register(ChatWindowView);\nWeb.Starter.objectFactory.register(VideoConferenceWindowView);\n\ninterface MailPluginView {\n    registerTemplate(template: any): void;\n}\nWeb.Starter.addEventListener<Web.Types.event.StarterLoadEvent>(\"load\", () => {\n    let mailPlugin = (<MailPluginView>Web.Starter.getComponent(\"mail-plugin\"));\n    if (mailPlugin) {\n        mailPlugin.registerTemplate(chatListElementTemplate);\n    }\n    \n}, \"chat\", \"ethernal\");\n\nWeb.Starter.addEventListener<Web.Types.event.InstanceRegisteredEvent<Web.window.message.MessageWindowView>>(\"instanceregistered\", event => {\n    if (event.instance && event.instance.className == \"com.privmx.core.window.message.MessageWindowView\") {\n        event.instance.registerCustomButton({\n            icon: \"ico-comment\",\n            labelKey: \"plugin.chat.window.message.header.button.chat.label\",\n            action: \"open-chat\",\n            visible: (sinkIndexEntry: Mail.mail.SinkIndexEntry, sinkType: string) => {\n                return sinkType != \"form\" && sinkIndexEntry.getMessage().sender.user != \"anonymous\";\n            }\n        });\n    }\n}, \"chat\", \"ethernal\");\n\nWeb.Starter.addEventListener<Web.Types.event.InstanceRegisteredEvent<Web.window.sectionsummary.SectionSummaryWindowView>>(\"instanceregistered\", event => {\n    if (event.instance && event.instance.className == \"com.privmx.core.window.sectionsummary.SectionSummaryWindowView\") {\n        let chat = new ChatMessagesView(event.instance, event.instance.personsComponent);\n        chat.$container = Web.JQuery('<div class=\"chat-messages-component\"></div>');\n        event.instance.registerModule(\"chat\", chat);\n    }\n}, \"chat\", \"ethernal\");"],"sourceRoot":"../../src"}