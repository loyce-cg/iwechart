!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return o(e[s][1][t]||t)}),c,c.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){(function(){var i,n,o,r;o=t("./DocumentElement"),r=t("simplito-logger").get("document-element.Document"),i=t("jquery"),n=function(){function t(){this.elements=[],r.debug("creating document"),this.setEditable(!1),this.setExternalClipboard(!1)}return t.klass="Document",t.prototype.addElement=function(t,e){var i;if("function"!=typeof t)throw"Not a function";if(!((i=new t)instanceof o))throw i=null,"Not a DocumentElement prototype";return e&&i.load(e),this.elements.push(i),i.setEditable(this.editable),i.setExternalClipboard(this.externalClipboard),this.bindToElementEvents(i),i},t.prototype.save=function(){var t,e,i,n,o;for(e=[],i=0,n=(o=this.elements).length;i<n;i++)t=o[i],e.push({klass:t.constructor.klass,spec:t.save()});return e},t.prototype.paste=function(t){var e,i,n,o,r;for(r=[],i=0,n=(o=this.elements).length;i<n;i++)e=o[i],r.push(e.paste(t));return r},t.prototype.setEditable=function(t){var e,i,n,o,r;for(this.editable=null==t||t,r=[],i=0,n=(o=this.elements).length;i<n;i++)e=o[i],r.push(e.setEditable(this.editable));return r},t.prototype.setExternalClipboard=function(t){var e,i,n,o,r;for(this.externalClipboard=null==t||t,r=[],i=0,n=(o=this.elements).length;i<n;i++)e=o[i],r.push(e.setExternalClipboard(this.externalClipboard));return r},t.prototype.deleteElement=function(t){var e;if(t>=0&&t<this.elements.length)return null!=(e=this.elements.splice(t,1)[0])?e.destroy():void 0},t.prototype.isDirty=function(){var t,e,i;for(t=0,e=(i=this.elements).length;t<e;t++)if(i[t].isDirty())return!0;return!1},t.prototype.bindToElementEvents=function(t){var e;return i(t).on("change.documentelement",(e=this,function(){return i(e).trigger("change.document",e.isDirty())})),i(t).on("save.documentelement",function(t){return function(){return i(t).trigger("save.document")}}(this)),i(t).on("editAttemptWhenNotEditable.documentelement",function(t){return function(e,n){return i(t).trigger("editAttemptWhenNotEditable.document",n)}}(this)),i(t).on("clickWithControl.documentelement",function(t){return function(e,n){return i(t).trigger("clickWithControl.document",n)}}(this)),i(t).on("copy.documentelement",function(t){return function(e,n){return i(t).trigger("copy.document",n)}}(this)),i(t).on("paste.documentelement",function(t){return function(e,n){return i(t).trigger("paste.document",n)}}(this))},t.prototype.confirmSave=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.elements).length;e<i;e++)t=n[e],o.push(t.confirmSave());return o},t}(),e.exports=n}).call(this)},{"./DocumentElement":2,jquery:11,"simplito-logger":13}],2:[function(t,e,i){(function(){var i,n,o,r;o=t("./Filters"),r=t("simplito-logger").get("document-element.DocumentElement"),i=t("jquery"),n=function(){function t(t){r.debug("creating element"),this.filters=new o,this.editable=!1,this.externalClipboard=!1,t&&this.load(t)}return t.klass="DocumentElement",t.prototype.load=function(t){return this.spec=t,r.debug("loading spec",this.spec)},t.prototype.save=function(){return r.debug("saving spec",this.spec)},t.prototype.paste=function(t){return r.debug("paste",t)},t.prototype.render=function(t){return this.container=i(t),r.debug("rendering spec to the container")},t.prototype.focus=function(){return r.debug("adding focus to element")},t.prototype.blur=function(){return r.debug("removing focus from element")},t.prototype.setEditor=function(t){return this.editor=t,r.debug("setting editor"),this.editor.setElement(this)},t.prototype.setEditable=function(t){return null==t&&(t=!0),this.editor?(r.debug("set editable",this.editable),this.editable=t):(r.debug("set editable: false - forced by missing editor"),void(this.editable=!1))},t.prototype.setExternalClipboard=function(t){return this.externalClipboard=null==t||t,r.debug("set externalClipboard",this.externalClipboard)},t.prototype.destroy=function(){var t;return null!=(t=this.container)?t.remove():void 0},t.prototype.isDirty=function(){return r.debug("checking dirty....",this),!1},t.prototype.confirmSave=function(){},t}(),e.exports=n}).call(this)},{"./Filters":3,jquery:11,"simplito-logger":13}],3:[function(t,e,i){(function(){var i,n;n=t("simplito-logger").get("document-element.Filters"),i=function(){function t(){n.debug("creating filters"),this.filters={}}return t.prototype.add=function(t,e){return this.filters[t]||(this.filters[t]=[]),this.filters[t].push(e)},t.prototype.execute=function(t,e,i){var o,r;return n.debug("executing filter "+t),(null!=(r=this.filters[t])?r.length:void 0)?(o=this.filters[t].slice().reverse(),this.run(o,e,i)):i(e)},t.prototype.run=function(t,e,i){var n,o;return"function"==typeof(n=t.pop())?n(e,(o=this,function(e){return o.run(t,e,i)})):i(e)},t}(),e.exports=i}).call(this)},{"simplito-logger":13}],4:[function(t,e,i){(function(){var t;t=function(){function t(){}return t.moveCaretToEnd=function(t){var e;return"number"==typeof t.selectionStart?t.selectionStart=t.selectionEnd=t.value.length:void 0!==t.createTextRange?(t.focus(),(e=t.createTextRange()).collapse(!1),e.select()):void 0},t}(),e.exports=t}).call(this)},{}],5:[function(t,e,i){(function(){var i,n,o;n=t("simplito-logger").get("document-element.MindMap"),i=t("jquery"),o=function(){function t(t,e){null==e&&(e={}),n.debug("new mindmap"),this.container=i(t),this.unregisterEventsHandlers(),this.registerEventsHandlers(),this.undoList=[],this.redoList=[],this.dirty=!1,this.externalClipboard=!1,this.options=i.extend(!0,{alphanumericEdit:!0,noShiftClipboard:!1,useData:!1,skipNavigationInfoOnDirtyCheck:!0,autoFocus:!0},e)}return t.klass="MindMap",t.prototype.VSPACE=0,t.prototype.HSPACE=32,t.prototype.paste=function(t){var e,i;return e=this.selected,Array.isArray(t)?(this.addUndo(),t.forEach((i=this,function(t){return i.pasteSingleAsChild(t,e)}))):(console.log("pasting inside document-element",t,e),this.pasteSingleAsChild(t,e))},t.prototype.pasteSingleAsSibling=function(t){var e;if(!this.selected.leaf&&this.editable&&t)return this.addUndo(),e=this.createNode(this.serializeTree(t)),this.insertNodeAfter(e,this.selected),this.layout(this.tree),this.select(e)},t.prototype.pasteSingleAsChild=function(t,e){var i;if(!this.selected.leaf&&this.editable&&t)return i=this.createNode(this.serializeTree(t)),this.appendNode(i,e),this.layout(this.tree),this.select(i)},t.prototype.setEditable=function(t){return this.editable=null==t||t,n.debug("mindmap set editable",this.editable)},t.prototype.setExternalClipboard=function(t){return this.externalClipboard=null==t||t,n.debug("mindmap set externalClipboard",this.externalClipboard)},t.prototype.setTree=function(t,e){var n;null==e&&(e=!1),this.editMode&&this.exitEditMode(!1),this.importantListMode&&this.exitImportantListMode(),this.selected=null,this.tree=null,this.container.find("div").remove(),this.container.find("svg").empty(),this.containerFocusableElement=i("<div tabindex='-1'>"),this.container.append(this.containerFocusableElement),this.tree=t,this.savedTreeState=this.serializeTreeForChanges(),this.createNode(this.tree),this.forEachNode(this.tree,(n=this,function(t){if(t.selected)return n.select(t),!1})),this.selected||this.select(this.tree),e?this.layout(this.tree,!0,this.options.autoFocus):this.layout(this.tree)},t.prototype.addUndo=function(){return this.undoList.push(this.serializeTree(this.tree)),this.redoList=[]},t.prototype.undo=function(){if(0!==this.undoList.length)return this.redoList.push(this.serializeTree(this.tree)),this.tree=this.undoList.pop(),this.setTree(this.tree)},t.prototype.redo=function(){if(0!==this.redoList.length)return this.undoList.push(this.serializeTree(this.tree)),this.tree=this.redoList.pop(),this.setTree(this.tree)},t.prototype.setClipboard=function(t){if(!this.externalClipboard){this.clipboardTree=t;try{sessionStorage&&("undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.setItem:void 0)&&sessionStorage.setItem("mindmap.clipboard",JSON.stringify(t))}catch(t){t,n.debug("Not supported")}}return i(this).trigger("copy.mindmap",t)},t.prototype.getClipboard=function(){var t;if(!this.externalClipboard)try{sessionStorage&&("undefined"!=typeof sessionsStorage&&null!==sessionsStorage?sessionsStorage.getItem:void 0)&&(t=sessionStorage.getItem("mindmap.clipboard"))&&(t=JSON.parse(t),this.clipboardTree=t)}catch(t){t,n.debug("Not supported")}return this.clipboardTree||i(this).trigger("paste.mindmap"),this.clipboardTree},t.prototype.getScrollRoot=function(){var t;for(t=this.container;t.length&&t.is(":not(html)")&&"visible"===t.css("overflow");)t=t.parent();return t},t.prototype.scrollIntoView=function(t){var e,n,o;return o=(e=this.getScrollRoot())[0].getBoundingClientRect(),(n=i(t)[0].getBoundingClientRect()).top<o.top?e.scrollTop(e.scrollTop()+(n.top-o.top)):n.bottom>o.bottom&&e.scrollTop(e.scrollTop()+(n.bottom-o.bottom)),n.left<o.left?e.scrollLeft(e.scrollLeft()+(n.left-o.left)):n.right>o.right?e.scrollLeft(e.scrollLeft()+(n.right-o.right)):void 0},t.prototype.serializeTree=function(t,e){var i,n,o,r,s;for(null==t&&(t=this.tree),null==e&&(e=!1),(n={}).label=t.label,e||t.collapsed&&(n.collapsed=!0),t.important&&(n.important=!0),t.leaf&&(n.leaf=!0),this.options.useData&&t.data&&(n.data=t.data),t.taskState&&(n.taskState=t.taskState),t.style&&t.style>0&&(n.style=t.style),n.nodes=[],o=0,r=(s=t.nodes).length;o<r;o++)i=s[o],n.nodes.push(this.serializeTree(i,e));return n},t.prototype.renderNodeHTML=function(t,e){var i;if(null==e&&(e=!1),!0!==t.preventLabelRender)return e?(t.div.find(".label").html(t.label),this.layout(this.tree,!1)):(this.filters.execute("node.label",t.label,(i=this,function(e){var n,o,r;for(t.labelHTML||(t.labelHTML=t.label),e!==t.labelHTML&&(t.labelHTML=e),t.div.find(".label").html(t.labelHTML),n=0,o=(r=i.getAllNodes(i.tree)).length;n<o;n++)if(!r[n].created)return;return i.layout(i.tree,!1)})),this.filters.execute("node.post.render",t,(function(e){return n.debug("node.post.render executed",t,e)})))},t.prototype.renderNodeRaw=function(t){if(!0!==t.preventLabelRender)return t.div.find(".label").html(this.editableNodeText(t))},t.prototype.editableNodeText=function(t){return this.selected===t&&this.clearInEditMode?"":t.label},t.prototype.changeNodeLabel=function(t,e){return this.addUndo(),t.label=e,this.renderNodeHTML(t),this.layout(this.tree)},t.prototype.createNode=function(t,e){var n,o,r,s,a,d,l,c,p;for(s in null==e&&(e=!1),r=i("<div class='node' style='visibility: hidden;'><div class='label'></div><div class='importantlist'></div></div>"),l=this.container.find("svg"),d=i(document.createElementNS("http://www.w3.org/2000/svg","path")),n=i(document.createElementNS("http://www.w3.org/2000/svg","circle")),l.append(d),l.append(n),this.container.append(r),t.style&&t.style>0&&r.find(".label").addClass("style"+t.style),t.important&&r.addClass("important"),t.taskState&&r.addClass(t.taskState),r.data("node",t),p=this,o=function(t){var e;if((e=r.data("node"))===p.selected){if(p.editMode)return!1;if(p.lastClick&&p.lastClick.node===e&&"not-selected"===p.lastClick.state&&(new Date).getTime()-p.lastClick.date.getTime()<300)return p.lastClick=null,0===e.nodes.length?p.editable?p.enterEditMode(!1):p.onEditAttemptWhenNotEditable(t):p.toggle(e),!1;if(p.lastClick&&p.lastClick.node===e&&"selected"===p.lastClick.state)return clearTimeout(p.lastClick.timeout),p.lastClick=null,p.editable?p.enterEditMode(!1):p.onEditAttemptWhenNotEditable(t),!1;p.lastClick={node:e,date:new Date,state:"selected",timeout:setTimeout((function(){return p.lastClick=null,p.toggle(e)}),300)}}else p.lastClick&&clearTimeout(p.lastClick.timeout),p.lastClick={node:e,date:new Date,state:"not-selected"},p.exitEditMode(!1),p.select(e)},function(t){return function(e){var i;return(i=r.data("node"))===t.selected&&t.editMode?(t.lastClick&&(clearTimeout(t.lastClick.timeout),t.lastClick=null),!1):(t.exitEditMode(!1),t.lastClick&&(new Date).getTime()-t.lastClick.date.getTime()<300&&(clearTimeout(t.lastClick.timeout),t.lastClick.node===i)?(t.lastClick=null,i===t.selected?(t.editable?t.enterEditMode(!1):t.onEditAttemptWhenNotEditable(e),!1):0===i.nodes.length?(t.select(i),t.editable?t.enterEditMode(!1):t.onEditAttemptWhenNotEditable(e),!1):void t.toggle(i)):0===i.nodes.length?(t.lastClick={node:i,date:new Date},t.select(i)):t.lastClick={node:i,date:new Date,timeout:setTimeout((function(){return t.lastClick=null,i===t.selected?t.toggle(i):t.select(i)}),300)})}}(this),r.on("click",function(t){return function(e){return e.ctrlKey||e.metaKey?i(t).trigger("clickWithControl.mindmap",{node:r.data("node"),event:e}):o(e)}}(this)),t.path=d,t.circle=n,t.div=r,null==t.data&&this.options.useData&&(t.data={}),c=t.nodes)a=c[s],s=+s,a.parent=t,this.createNode(a,e),a.idx=s,s>0&&(a.prev=t.nodes[s-1]),s<t.nodes.length-1&&(a.next=t.nodes[s+1]);return this.renderNodeHTML(t,e),t.created=!0,t},t.prototype.computeBBox=function(t){var e,i,n;for(e in t.width=t.div.outerWidth(),t.height=t.div.outerHeight(),t.labelHeight=t.div.find("> .label").outerHeight(),t.bbox={x:0,y:0,w:0,h:0},n=t.nodes)i=n[e],e=+e,this.computeBBox(i),t.collapsed||(t.bbox.h+=i.bbox.h,e>0&&(t.bbox.h+=this.VSPACE),t.bbox.w=Math.max(t.bbox.w,i.bbox.w));t.bbox.w+=this.HSPACE+t.width,t.bbox.h=Math.max(t.bbox.h,t.height)},t.prototype.position=function(t,e,i,n){var o,r,s,a,d,l,c,p,h,u,m,f;for(t.bbox.x=e,t.bbox.y=i,t.x=t.bbox.x,t.y=t.bbox.y+(t.bbox.h-t.height)/2,d=t.bbox.y,a=t.x+t.width+this.HSPACE,c=0,h=(m=t.nodes).length;c<h;c++)s=m[c],this.position(s,a,d,n||t.collapsed),d+=s.bbox.h+this.VSPACE;if(n)return t.hidden=!0,t.div.css("left","-10000px"),t.div.css("visibility","hidden"),t.path.css("visibility","hidden"),void t.circle.css("visibility","hidden");if(t.hidden=!1,t.div.css("visibility","visible"),t.div.css("left",t.x+"px"),t.div.css("top",t.y+"px"),0===t.nodes.length)t.circle.css("visibility","hidden"),t.path.css("visibility","hidden");else if(t.circle.css("visibility",t.collapsed?"visible":"hidden"),t.path.css("visibility",t.collapsed?"hidden":"visible"),o=t.x+t.width,r=t.y+t.labelHeight/2,t.collapsed)t.circle.attr("cx",e+t.width+5).attr("cy",r).attr("r","3");else{for(l="",p=0,u=(f=t.nodes).length;p<u;p++)s=f[p],l+="M "+o+" "+r+" C "+(o+.9*this.HSPACE)+" "+r+" "+(o+.4*this.HSPACE)+" "+(s.y+s.labelHeight/2)+"  "+(o+this.HSPACE)+" "+(s.y+s.labelHeight/2);t.path.attr("d",l)}},t.prototype.layout=function(t,e,n){var o,r,s;null==e&&(e=!0),null==n&&(n=!0),s=(o=this.getScrollRoot()).scrollTop(),r=o.scrollLeft(),this.updateImportantLists(),this.computeBBox(t),this.position(t,0,0),i("svg",this.container).attr("width",this.tree.bbox.w).attr("height",this.tree.bbox.h),this.container.width(this.tree.bbox.w+100),this.container.height(this.tree.bbox.h+20),n&&this.containerFocusableElement.focus(),e&&this.checkIfTreeHasBeenChanged(),o.scrollTop(s),o.scrollLeft(r),this.selected&&this.scrollIntoView(this.selected.div)},t.prototype.toggle=function(t){t.nodes.length&&(t.collapsed=!t.collapsed,this.layout(this.tree))},t.prototype.select=function(t){var e;if(t){if(this.selected&&(this.selected.selected=!1,this.selected.div.removeClass("selected")),this.previousSelected=this.selected,this.selected=t,this.selected.selected=!0,this.selected.div.addClass("selected"),this.selected.parent&&(this.selected.parent.lastVisited=this.selected),this.selected.hidden){for(e=this.selected.parent;e;)e.collapsed=!1,e=e.parent;this.layout(this.tree)}this.scrollIntoView(this.selected.div),i(this).trigger("mindmap.select"),this.options.skipNavigationInfoOnDirtyCheck||this.checkIfTreeHasBeenChanged()}},t.prototype.selectPrev=function(t){var e,i;for(i=t,e=0;i.parent&&!i.prev;)i=i.parent,++e;if(i.prev){for(i=i.prev;e>0&&i.nodes.length>0&&!i.collapsed;)i=i.nodes[i.nodes.length-1],--e;this.select(i)}},t.prototype.selectNext=function(t){var e,i;for(i=t,e=0;i.parent&&!i.next;)i=i.parent,++e;if(i.next){for(i=i.next;e>0&&i.nodes.length>0&&!i.collapsed;)i=i.nodes[0],--e;this.select(i)}},t.prototype.enterEditMode=function(t,e){var i;this.editMode||(this.editMode=!0,this.clearInEditMode=!!e,this.newMode=t,this.editor.show(),(i=window.getSelection()).isCollapsed||i.collapse(this.selected.div.find(".label")[0],1))},t.prototype.exitEditMode=function(t){var e,i,n,o,r,s;this.editMode&&(this.editMode=!1,this.editor.hide(),s=(e=this.getScrollRoot()).scrollTop(),n=e.scrollLeft(),i=this.selected.div.find(".label"),t?(!0!==this.selected.preventLabelRender&&i.html(this.selected.label),this.renderNodeHTML(this.selected),this.newMode&&(o=this.selected,this.select(this.previousSelected),this.deleteNode(o),this.newMode=!1)):(this.newMode||this.addUndo(),this.selected.label=i.html().replace(/<br>$/,""),this.renderNodeHTML(this.selected)),this.layout(this.tree),(r=window.getSelection()).isCollapsed||r.collapse(this.selected.div.find(".label")[0],1),e.scrollTop(s),e.scrollLeft(n),this.scrollIntoView(this.selected.div))},t.prototype.updateImportantLists=function(){var t;this.forEachNode(this.tree,(function(t){var e;if(t.importantList=[],t.important)for(e=t.parent;e;)e.collapsed&&e.importantList.push(t),e=e.parent})),this.forEachNode(this.tree,(t=this,function(e){var n,o,r,s,a,d,l;for((n=e.div.find(".importantlist")).empty(),a=0,d=(l=e.importantList).length;a<d;a++)s=(o=l[a]).label.length<20?o.label:o.label.substr(0,20)+"...",(r=i("<div class='importantitem'><span class='arrow'>&rarr;</span><span class='label'>"+s+"</span></div>")).data("refnode",o),r.addClass("style"+o.style),r.on("click",(function(e){return e.stopPropagation(),t.select(r.data("refnode"))})),n.append(r)}))},t.prototype.toggleImportant=function(){this.addUndo(),this.selected.important=!this.selected.important,this.selected.important?this.selected.div.addClass("important"):this.selected.div.removeClass("important")},t.prototype.toggleTaskState=function(){this.addUndo(),this.selected.taskState?(this.selected.div.removeClass(this.selected.taskState),"todo"===this.selected.taskState?(this.selected.taskState="done",this.selected.div.addClass(this.selected.taskState)):this.selected.taskState=null):(this.selected.taskState="todo",this.selected.div.addClass(this.selected.taskState))},t.prototype.setStyle=function(t){var e;this.addUndo(),e=this.selected.div.find(".label"),this.selected.style>0&&e.removeClass("style"+this.selected.style),this.selected.style=t,e.addClass("style"+t),this.layout(this.tree)},t.prototype.forEachNode=function(t,e){var i,n,o,r;if(!0===e(t))return!1;for(n=0,o=(r=t.nodes).length;n<o;n++)if(i=r[n],!1===this.forEachNode(i,e))return!1;return!0},t.prototype.getImportantList=function(t){var e,i,n,o,r;for(e=[],n=0,o=(r=t.nodes).length;n<o;n++)i=r[n],this.forEachNode(i,(function(t){if(t.important)return e.push(t)}));return e},t.prototype.reindexNodes=function(t){var e,i;for(e in t)i=t[e],e=+e,i.idx=e,i.prev=e>0?t[e-1]:null,e<t.length-1?i.next=t[e+1]:i.next=null},t.prototype.selectPrevious=function(t){t.prev?this.select(t.prev):t.next?this.select(t.next):this.select(t.parent)},t.prototype.detachNode=function(t){var e;if(t.parent)return(e=t.parent).nodes.splice(t.idx,1),this.reindexNodes(e.nodes),t.parent=null,t},t.prototype.deleteNode=function(t){var e;if(t.parent){for(t===this.selected&&(t.parent.nodes[t.parent.nodes.length-1]===t?this.selectPrevious(t):this.selectNext(t)),this.detachNode(t),e=[t];e.length>0;)(t=e.shift()).div.remove(),t.path.remove(),t.circle.remove(),e=e.concat(t.nodes);this.layout(this.tree)}},t.prototype.moveUp=function(t){var e;t.prev&&(t.parent.lastVisited||(t.parent.lastVisited=t),(e=t.parent.nodes)[t.idx]=t.prev,e[t.idx-1]=t,this.reindexNodes(e),this.layout(this.tree))},t.prototype.moveDown=function(t){var e;t.next&&(t.parent.lastVisited||(t.parent.lastVisited=t),(e=t.parent.nodes)[t.idx]=t.next,e[t.idx+1]=t,this.reindexNodes(e),this.layout(this.tree))},t.prototype.appendNode=function(t,e){var i;(null!=(i=t.parent)?i.lastVisited:void 0)===t&&(t.parent.lastVisited=null),this.detachNode(t),t.parent=e,e.nodes.push(t),this.reindexNodes(e.nodes),e.lastVisited=t},t.prototype.insertNodeAt=function(t,e,i){var n;e&&((null!=(n=t.parent)?n.lastVisited:void 0)&&t.parent!==e&&(t.parent.lastVisited=null),this.detachNode(t),t.parent=e,e.nodes=e.nodes.slice(0,i).concat([t]).concat(e.nodes.slice(i)),this.reindexNodes(e.nodes))},t.prototype.insertNodeAfter=function(t,e){e&&this.insertNodeAt(t,e.parent,e.idx+1)},t.prototype.insertNodeBefore=function(t,e){e&&this.insertNodeAt(t,e.parent,e.idx)},t.prototype.insertNodeAsParent=function(t,e){this.detachNode(t),t.parent=e.parent,e.parent=t,t.parent.nodes[e.idx]=t,this.reindexNodes(t.parent.nodes),t.parent.lastVisited===e&&(t.parent.lastVisited=t),t.nodes.push(e),this.reindexNodes(t.nodes)},t.prototype.enterImportantListMode=function(){!this.importantListMode&&this.selected&&this.selected.importantList&&0!==this.selected.importantList.length&&(this.importantListMode=!0,this.importantListIdx=0,this.selected.div.removeClass("selected"),this.selected.div.find(".importantitem").eq(this.importantListIdx).addClass("selected"))},t.prototype.exitImportantListMode=function(){this.importantListMode&&(this.importantListMode=!1,this.selected.div.addClass("selected"),this.selected.div.find(".importantitem").eq(this.importantListIdx).removeClass("selected"))},t.prototype.unregisterEventsHandlers=function(){this.container.off(".mindmap")},t.prototype.registerEventsHandlers=function(){var t;this.container.on("keyup.mindmap",(t=this,function(e){var i;t.importantListMode&&16===e.keyCode&&(i=t.selected.importantList[t.importantListIdx],t.exitImportantListMode(),t.select(i))})),this.container.on("keydown.mindmap",function(t){return function(e){var n,o,r,s,a,d;if(t.selected)if(t.importantListMode){if(e.preventDefault(),e.shiftKey){if(13===e.keyCode)return a=t.selected.importantList[t.importantListIdx],t.exitImportantListMode(),void t.select(a);if(40===e.keyCode){if(t.importantListIdx===t.selected.importantList.length-1)return;return t.selected.div.find(".importantitem").eq(t.importantListIdx).removeClass("selected"),++t.importantListIdx,void t.selected.div.find(".importantitem").eq(t.importantListIdx).addClass("selected")}if(38===e.keyCode){if(0===t.importantListIdx)return;return t.selected.div.find(".importantitem").eq(t.importantListIdx).removeClass("selected"),--t.importantListIdx,void t.selected.div.find(".importantitem").eq(t.importantListIdx).addClass("selected")}}t.exitImportantListMode()}else{if(t.editMode){if(27===e.keyCode||113===e.keyCode)return e.preventDefault(),void t.exitEditMode(!0);if(13===e.keyCode){if(!e.ctrlKey&&!e.metaKey&&e.shiftKey)return;return e.preventDefault(),void t.exitEditMode(!1)}return 9===e.keyCode?(e.preventDefault(),void t.exitEditMode(!1)):(s=t.selected.x+t.selected.div.outerWidth(),void(t.container.width()<s+50&&t.container.width(s+100)))}if(e.ctrlKey||e.metaKey){switch(r=!0,e.keyCode){case 89:t.redo();break;case 90:t.undo();break;case 67:e.shiftKey&&t.options.noShiftClipboard||t.setClipboard(t.serializeTree(t.selected));break;case 68:t.editable?(e.preventDefault(),e.stopPropagation(),null!=t.selected&&null!=t.selected.parent&&(t.addUndo(),o=JSON.parse(JSON.stringify(t.serializeTree(t.selected))),a=t.createNode(o),t.insertNodeAfter(a,t.selected),t.layout(t.tree),t.select(a))):t.onEditAttemptWhenNotEditable(e);break;case 88:t.editable?e.shiftKey&&t.options.noShiftClipboard||(t.setClipboard(t.serializeTree(t.selected)),t.deleteNode(t.selected)):t.onEditAttemptWhenNotEditable(e);break;case 86:t.editable?(console.log("ctrlV catched"),t.selected.leaf||e.shiftKey&&t.options.noShiftClipboard||(n=t.getClipboard(),t.paste(n))):t.onEditAttemptWhenNotEditable(e);break;case 83:t.editable?i(t).trigger("save.mindmap"):t.onEditAttemptWhenNotEditable(e);break;default:r=!1}if(r)return void e.preventDefault()}if(46!==e.keyCode)if(49===e.keyCode&&e.shiftKey)t.editable?(e.preventDefault(),t.toggleImportant(),t.layout(t.tree)):t.onEditAttemptWhenNotEditable(e);else if(50===e.keyCode&&e.shiftKey)t.editable?(e.preventDefault(),t.toggleTaskState(),t.layout(t.tree)):t.onEditAttemptWhenNotEditable(e);else{if(!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){switch(r=!0,e.keyCode){case 113:t.editable?t.enterEditMode(!1):t.onEditAttemptWhenNotEditable(e);break;case 112:t.editable?t.setStyle(0):t.onEditAttemptWhenNotEditable(e);break;case 114:t.editable?t.setStyle(1):t.onEditAttemptWhenNotEditable(e);break;case 115:t.editable?t.setStyle(2):t.onEditAttemptWhenNotEditable(e);break;case 116:t.editable?t.setStyle(3):t.onEditAttemptWhenNotEditable(e);break;case 117:t.editable?t.setStyle(4):t.onEditAttemptWhenNotEditable(e);break;default:r=!1}if(r)return void e.preventDefault()}if(9===e.keyCode)return e.preventDefault(),void(!t.editable||t.selected.leaf&&!e.shiftKey?t.onEditAttemptWhenNotEditable(e):(t.addUndo(),a=t.createNode({label:"",nodes:[]},!0),e.shiftKey?t.insertNodeAsParent(a,t.selected):t.appendNode(a,t.selected),t.layout(t.tree),t.select(a),t.enterEditMode(!0)));if(13!==e.keyCode){if(32===e.keyCode)return e.preventDefault(),void t.toggle(t.selected);if(39!==e.keyCode)return 37===e.keyCode?(e.preventDefault(),void(e.ctrlKey||e.metaKey?t.editable?(t.insertNodeAfter(t.selected,t.selected.parent),t.layout(t.tree)):t.onEditAttemptWhenNotEditable(e):t.select(t.selected.parent))):40===e.keyCode?(e.preventDefault(),void(e.ctrlKey||e.metaKey?t.editable?t.moveDown(t.selected):t.onEditAttemptWhenNotEditable(e):e.shiftKey?t.enterImportantListMode():t.selectNext(t.selected))):38===e.keyCode?(e.preventDefault(),void(e.ctrlKey||e.metaKey?t.editable?t.moveUp(t.selected):t.onEditAttemptWhenNotEditable(e):e.shiftKey||t.selectPrev(t.selected))):t.selected&&t.options.alphanumericEdit&&t.isAlphaumericKeyCode(e.keyCode)?t.editable?t.enterEditMode(!1,!0):t.onEditAttemptWhenNotEditable(e):void 0;if(e.preventDefault(),e.ctrlKey||e.metaKey){if(t.editable){for(d=t.selected.prev;null!=d&&d.leaf;)d=d.prev;for(d||(d=t.selected.next);null!=d&&d.leaf;)d=d.next;if(!d)return;t.appendNode(t.selected,d),d.collapsed=!1,t.layout(t.tree)}else t.onEditAttemptWhenNotEditable(e);return}if(0===t.selected.nodes.length)return;t.selected.lastVisited?t.select(t.selected.lastVisited):t.select(t.selected.nodes[0])}else{if(e.preventDefault(),!t.selected.parent)return;t.editable?(t.addUndo(),a=t.createNode({label:"",nodes:[]},!0),e.shiftKey?t.insertNodeBefore(a,t.selected):t.insertNodeAfter(a,t.selected),t.layout(t.tree),t.select(a),t.enterEditMode(!0)):t.onEditAttemptWhenNotEditable(e)}}else t.editable?(e.preventDefault(),t.addUndo(),t.deleteNode(t.selected)):t.onEditAttemptWhenNotEditable(e)}}}(this))},t.prototype.isAlphaumericKeyCode=function(t){return 8===t||9===t||13===t||32===t||t>=48&&t<=57||59===t||61===t||t>=65&&t<=90||t>=96&&t<=111||173===t||188===t||190===t||191===t||192===t||219===t||220===t||222===t},t.prototype.clearTextSelection=function(){var t,e;window.getSelection?(t=window.getSelection()).empty?t.empty():t.removeAllRanges&&t.removeAllRanges():null!=(e=document.selection)&&e.empty()},t.prototype.onEditAttemptWhenNotEditable=function(t){return i(this).trigger("editAttemptWhenNotEditable.mindmap",{event:t})},t.prototype.serializeTreeForChanges=function(){return JSON.stringify(this.serializeTree(this.tree,this.options.skipNavigationInfoOnDirtyCheck))},t.prototype.checkIfTreeHasBeenChanged=function(){var t;return this.savedTreeState?(t=this.serializeTreeForChanges(),n.debug("savedState",this.savedTreeState),n.debug("previousTreeState",this.previousTreeState),n.debug("currentState",t),this.dirty=t!==this.savedTreeState,this.previousTreeState!==t&&(i(this).trigger("change.mindmap"),this.previousTreeState=t)):(this.previousTreeState=this.savedTreeState=this.serializeTreeForChanges(),this.dirty=!1),n.debug("changes - dirty?",this.dirty)},t.prototype.confirmThatTreeHasBeenSaved=function(){return this.savedTreeState=this.serializeTreeForChanges(),this.dirty=!1,i(this).trigger("change.mindmap")},t.prototype.getAllNodes=function(t){var e,i;for(i=[t],e=0;i[e].nodes.length&&i[e].nodes.forEach((function(t){return i.push(t)})),++e<i.length;);return i},t}(),e.exports=o}).call(this)},{jquery:11,"simplito-logger":13}],6:[function(t,e,i){(function(){var i,n;i=t("simplito-logger").get("document-element.MindMapEditor"),n=function(){function t(){i.debug("new mindmap editor")}return t.klass="MindMapEditor",t.prototype.addFiltersToElement=function(){},t.prototype.setElement=function(t,e){if(null==e&&(e=!0),!this.element&&(this.element=t,e))return this.addFiltersToElement()},t.prototype.show=function(){var t,e,i,n;return(e=this.element.mm).renderNodeRaw(e.selected),e.selected.div.find(".label").off("blur.editor").on("blur.editor",(function(){return e.exitEditMode(!1)})),e.selected.div.addClass("editable"),(t=e.selected.div.find(".label")).attr("tabindex","-1").attr("contentEditable",!0).focus(),(i=document.createRange()).selectNodeContents(t[0]),i.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(i)},t.prototype.hide=function(){var t;return(t=this.element.mm).selected.div.removeClass("editable"),t.selected.div.find(".label").removeAttr("tabindex","-1").removeAttr("contentEditable")},t.prototype.registerEventsHandlers=function(){return this.element.container.on("keydown.mindmap",(t=this,function(e){var i,n;if((i=t.element.mm).selected)return i.editMode&&66===e.keyCode&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),void document.execCommand("bold",!1,"")):void(66===e.keyCode&&(e.ctrlKey||e.metaKey)&&(i.editable?(i.enterEditMode(!1),document.execCommand("selectAll",!1,""),document.execCommand("bold",!1,""),(n=window.getSelection()).isCollapsed||n.collapse(i.selected.div.find(".label")[0],0),i.exitEditMode(!1)):i.onEditAttemptWhenNotEditable(),e.preventDefault()))}));var t},t}(),e.exports=n}).call(this)},{"simplito-logger":13}],7:[function(t,e,i){(function(){var i,n,o,r,s,a={}.hasOwnProperty;r=t("./MindMapEditor"),n=t("./Helpers"),o=t("simplito-logger").get("document-element.MindMapEditorRedmine"),i=t("jquery"),s=function(t){function e(t){this.options=null!=t?t:{},o.debug("mm editor redmine options",this.options)}return function(t,e){for(var i in e)a.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.klass="MindMapEditorRedmine",e.prototype.show=function(){var t,e,o;return(t=this.element.mm).selected.div.addClass("editable").find(".label").hide(),(e=i("<textarea></textarea>")).on("click",(function(t){return t.stopPropagation()})).on("blur",(function(){return t.exitEditMode(!1)})).one("focus",(o=this,function(){if(e.val(t.editableNodeText(t.selected)),o.options.autosize)return i(e).autosize()})),t.selected.div.append(e),setTimeout((function(){return e.focus(),n.moveCaretToEnd(e[0])}),250)},e.prototype.hide=function(){var t,e;return e=(t=this.element.mm).selected.div.children("textarea"),t.selected.div.children("textarea").remove(),t.selected.div.removeClass("editable").find(".label").text(e.val()).show()},e.prototype.registerEventsHandlers=function(){return this.element.container.on("keydown.mindmap",(t=this,function(e){var i,n;i=!1,(n=t.element.mm).selected&&(!n.editMode&&73===e.keyCode&&e.ctrlKey&&(n.editable?"function"==typeof t.options.createIssueHandler&&(i=!0,t.options.createIssueHandler(n.selected.label,(function(t){return n.changeNodeLabel(n.selected,n.selected.label+"\n\nSee issue: #"+t)}))):(i=!0,n.onEditAttemptWhenNotEditable(e))),i&&e.preventDefault())}));var t},e.prototype.addFiltersToElement=function(){if(this.options.textilizeUrl)return this.element.filters.add("node.label",(t=this,function(e,n){var r;if("function"==typeof n)return"string"==typeof e&&""===i.trim(e)?void n(e):t.options.lscache&&(lscache.setBucket(t.options.lscache.bucket),null!==(r=lscache.get(e)))?(o.debug("filter: getting result from cache"),void n(r)):(o.debug("filter: making ajax request"),i.ajax({url:t.options.textilizeUrl,type:"post",data:{s:e},success:function(i){return t.options.lscache&&(lscache.setBucket(t.options.lscache.bucket),lscache.set(e,i,t.options.lscache.ttl)),n(i)},error:function(){return n(e)}}))}));var t},e}(r),e.exports=s}).call(this)},{"./Helpers":4,"./MindMapEditor":6,jquery:11,"simplito-logger":13}],8:[function(t,e,i){(function(){var i,n,o,r,s={}.hasOwnProperty;n=t("./DocumentElement"),o=t("./MindMap"),i=t("jquery"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.klass="MindMapElement",e.prototype.render=function(t,e){return this.container=t,null==e&&(e={}),this.container.empty().attr("tabindex","-1").addClass("mindmap").append("<svg xmlns='http://www.w3.org/2000/svg' version='1.1'/>"),this.mm=new o(this.container,e),this.bindToMindMapEvents(),this.mm.filters=this.filters,this.mm.editor=this.editor,this.mm.editor&&this.mm.editor.registerEventsHandlers(),this.mm.setEditable(this.editable),this.mm.setExternalClipboard(this.externalClipboard),this.mm.setTree(this.spec,!0)},e.prototype.save=function(){return this.mm.serializeTree()},e.prototype.paste=function(t){var e;return null!=(e=this.mm)?e.paste(t):void 0},e.prototype.setEditable=function(t){var i;return null==t&&(t=!0),e.__super__.setEditable.call(this,t),null!=(i=this.mm)?i.setEditable(this.editable):void 0},e.prototype.setExternalClipboard=function(t){var i;return null==t&&(t=!0),e.__super__.setExternalClipboard.call(this,t),null!=(i=this.mm)?i.setExternalClipboard(this.externalClipboard):void 0},e.prototype.bindToMindMapEvents=function(){var t;return i(this.mm).on("save.mindmap",(t=this,function(){return i(t).trigger("save.documentelement")})),i(this.mm).on("change.mindmap",function(t){return function(){return i(t).trigger("change.documentelement")}}(this)),i(this.mm).on("editAttemptWhenNotEditable.mindmap",function(t){return function(e,n){return i(t).trigger("editAttemptWhenNotEditable.documentelement",n)}}(this)),i(this.mm).on("clickWithControl.mindmap",function(t){return function(e,n){return i(t).trigger("clickWithControl.documentelement",n)}}(this)),i(this.mm).on("copy.mindmap",function(t){return function(e,n){return i(t).trigger("copy.documentelement",n)}}(this)),i(this.mm).on("paste.mindmap",function(t){return function(e,n){return i(t).trigger("paste.documentelement",n)}}(this))},e.prototype.isDirty=function(){return this.mm.dirty},e.prototype.confirmSave=function(){return this.mm.confirmThatTreeHasBeenSaved()},e}(n),e.exports=r}).call(this)},{"./DocumentElement":2,"./MindMap":5,jquery:11}],9:[function(t,e,i){(function(){var i,n,o,r={}.hasOwnProperty;n=t("./DocumentElement"),i=t("jquery"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.klass="PlainTextElement",e.prototype.render=function(t){return this.container=t,this.textarea=i("<textarea/>"),this.spec&&this.textarea.val(this.spec),this.container.empty().append(this.textarea),this.setEditable(this.editable)},e.prototype.save=function(){return this.textarea.val()},e.prototype.setEditable=function(t){var i,n;return null==t&&(t=!0),e.__super__.setEditable.call(this,t),this.editable?null!=(i=this.textarea)?i.removeAttr("readonly"):void 0:null!=(n=this.textarea)?n.attr("readonly",!0):void 0},e}(n),e.exports=o}).call(this)},{"./DocumentElement":2,jquery:11}],10:[function(t,e,i){e.exports={Document:t("./build/js/Document"),DocumentElement:t("./build/js/DocumentElement"),Filters:t("./build/js/Filters"),Helpers:t("./build/js/Helpers"),MindMap:t("./build/js/MindMap"),MindMapEditor:t("./build/js/MindMapEditor"),MindMapEditorRedmine:t("./build/js/MindMapEditorRedmine"),MindMapElement:t("./build/js/MindMapElement"),PlainTextElement:t("./build/js/PlainTextElement")}},{"./build/js/Document":1,"./build/js/DocumentElement":2,"./build/js/Filters":3,"./build/js/Helpers":4,"./build/js/MindMap":5,"./build/js/MindMapEditor":6,"./build/js/MindMapEditorRedmine":7,"./build/js/MindMapElement":8,"./build/js/PlainTextElement":9}],11:[function(t,e,i){e.exports=privmxViewRequire("jquery")},{}],12:[function(t,e,i){var n=privmxViewRequire("privmx-view");e.exports=n},{}],13:[function(t,e,i){e.exports=privmxViewRequire("simplito-logger")},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("pmc-web"),o=t("../window/editor/EditorWindowView"),r=t("../window/mindmaphelp/MindmapHelpWindowView"),s=t("../window/settingsnotes/SettingsNotesView"),a=t("../main/EditorViewHelper");n.Starter.objectFactory.register(o.EditorWindowView),n.Starter.objectFactory.register(r.MindmapHelpWindowView),n.Starter.addEventListener("templatemanagercreated",(function(t){t.templateManager.registerHelper(new a.EditorViewHelper(t.templateManager,t.helperModel))}),"editor","ethernal"),n.Starter.addEventListener("instanceregistered",(function(t){t.instance&&"com.privmx.core.window.settings.SettingsWindowView"==t.instance.className&&new s.SettingsNotesView(t.instance)}),"editor","ethernal")},{"../main/EditorViewHelper":15,"../window/editor/EditorWindowView":16,"../window/mindmaphelp/MindmapHelpWindowView":30,"../window/settingsnotes/SettingsNotesView":32,"pmc-web":12}],15:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.getAvailableNotesStyles=function(){return{default:"Default",terminal:"Terminal","black-on-white":"Black on white","white-on-black":"White on black",papyrus:"Papyrus"}},e}(t("pmc-web").webUtils.MailClientViewHelper);i.EditorViewHelper=r,r.prototype.className="com.privmx.plugin.editor.main.EditorViewHelper"},{"pmc-web":12}],16:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("pmc-web"),s=t("./template/main.html"),a=t("./template/toolbar.html"),d=t("./template/editor-banner.html"),l=t("./editors/Mindmap"),c=t("./editors/TextEdit"),p=t("./editors/HtmlEdit"),h=t("./editors/StyledEditor"),u=function(t){function e(e){var i=t.call(this,e,s.func)||this;return i.isCtrlKeyDown=!1,i.editModeFromPreview=!1,i.toolbarOverflownWidth=-1,i.fileLoadedDeferred=r.Q.defer(),i.html2canvasScaleMultiplier=1,i.taskStatuses={},i.printMode=!1,i.personsComponent=i.addComponent("persons",new r.component.persons.PersonsView(i,i.helper)),i.notifications=i.addComponent("notifications",new r.component.notification.NotificationView(i)),i.editorButtons=i.addComponent("editorbuttons",new r.component.editorbuttons.EditorButtonsView(i)),i.taskTooltip=i.addComponent("tasktooltip",new r.component.tasktooltip.TaskTooltipView(i)),i.taskChooser=i.addComponent("taskchooser",new r.component.taskchooser.TaskChooserView(i)),i.taskTooltip.refreshAvatars=function(){i.personsComponent.refreshAvatars()},i}return o(e,t),e.prototype.initWindow=function(t){var e=this;return this.printMode=!!t.printMode,r.Q().then((function(){return t.printMode&&(r.JQuery("html").addClass("print-mode"),r.JQuery("body").addClass("print-mode")),r.JQuery("body").attr("data-style-name",t.initialStyleName),e.$mainContent=e.$main.find(".main-content"),e.personsComponent.$main=e.$main,e.editorButtons.$main=e.$main,e.editorButtons.$container=e.$mainContent,e.notifications.$container=e.$main.find(".notifications"),e.currentViewId=t.currentViewId,e.previewMode=t.previewMode,e.$toolbar=e.$mainContent.find(".toolbar-container"),e.$editor=e.$mainContent.find(".editor"),e.$statusBar=e.$mainContent.find(".status-bar"),e.taskTooltip.$container=e.$main,e.taskChooser.$container=e.$main,e.toolbarTmpl=e.templateManager.createTemplate(a.func),r.Q().then((function(){return e.personsComponent.triggerInit()})).then((function(){return r.Q.all([e.notifications.triggerInit(),e.editorButtons.triggerInit(),e.taskTooltip.triggerInit(),e.taskChooser.triggerInit()])}))})).then((function(){e.editorButtons.onContainerSizeChangedHandler((function(){e.updatePaddingBottom()})),e.updatePaddingBottom(),r.JQuery(window).resize(e.onResizeWindow.bind(e)),t.previewMode&&t.docked&&(e.$mainContent.on("click",e.onFocusedIn.bind(e)),e.bindTabSwitch(),e.bindEnterPressed()),e.bindToolbarActions(),e.prepareForDistractionFreeMode(),e.refreshPreviewMode(),e.bindEditorKeyPresses()}))},e.prototype.bindToolbarActions=function(){this.$mainContent.on("click","[data-action=save]",this.onSaveClick.bind(this)),this.$mainContent.on("click","[data-action=enter-edit-mode]",this.onEnterEditModeClick.bind(this)),this.$mainContent.on("click","[data-action=exit-edit-mode]",this.onExitEditModeClick.bind(this)),this.$mainContent.on("click","[data-action=exit-edit-mode-and-close]",this.onExitEditModeAndCloseClick.bind(this)),this.$mainContent.on("click","[data-action=close]",this.onCloseClick.bind(this)),this.$mainContent.on("click","[data-action=rename]",this.onRenameClick.bind(this)),this.$mainContent.on("click","[data-action=open-mindmap-help]",this.onOpenMindmapHelpClick.bind(this)),this.$mainContent.on("click","[data-action=reload]",this.onReloadClick.bind(this)),this.$mainContent.on("click","[data-action=distracton-free-mode-toggle]",this.onDistractionFreeModeToggleClick.bind(this)),this.$mainContent.on("click","[data-action=popup-window]",this.onPopupWindowClick.bind(this)),this.$mainContent.on("click","[data-action=edit]",this.onOpenEditWindowClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=download]",this.onDownloadClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=attach-to-task]",this.onAttachToTaskClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=send]",this.onSendClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=print]",this.onPrintClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=save-as-pdf]",this.onSaveAsPdfClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=lock]",this.onLockFileClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=unlock]",this.onUnlockFileClick.bind(this)),this.$mainContent.on("click",".toolbar-container [data-action=history]",this.onHistoryClick.bind(this)),this.$mainContent.on("click","[data-action=open-toolbar-more]",this.onOpenToolbarMoreClick.bind(this)),this.$mainContent.on("click",".context-menu-backdrop2",this.onCloseToolbarMoreClick.bind(this)),this.$mainContent.on("click",".context-menu-toolbar-more",this.onToolbarMoreItemClick.bind(this)),this.$mainContent.on("click","[data-action=open-tools-menu]",this.onToolbarToolsClick.bind(this)),this.$mainContent.on("click",".context-menu-toolbar-tools",this.onToolbarToolsItemClick.bind(this)),this.$mainContent.on("click","[data-task-id]",this.onTaskClick.bind(this))},e.prototype.toggleEditorHidden=function(t){this.$main.closest("body").toggleClass("hide",t)},e.prototype.onResizeWindow=function(){this.updateToolbarItemsVisibility()},e.prototype.updateToolbarItemsVisibility=function(){var t=this.$toolbar.find(".toolbar"),e=this.doInnerElementsFit(t.get(0));t.find(".right-side-buttons").toggleClass("invisible",!e),t.parent().find(".more-button").toggleClass("hide",e)},e.prototype.onFocusedIn=function(){this.triggerEvent("focusedIn")},e.prototype.load=function(t,e,i,n,o,r,s){var a=this;if(this.currentViewId==t){var d;if("application/x-smm"==o.mimeType)d=l.Mindmap;else if(o.mimeType.startsWith("text/"))d=c.TextEdit;else if("application/x-stt"==o.mimeType)d=".stx"==o.extl?c.TextEdit:p.HtmlEdit;else if(".smm"==o.extl)d=l.Mindmap;else if(".stx"==o.extl||".txt"==o.extl)d=c.TextEdit;else{if(".stt"!=o.extl)throw new Error(this.i18n("plugin.editor.window.editor.error.unknownFileType"));d=p.HtmlEdit}this.entry=o,this.$mainContent.find("> .buttons").toggleClass("hide",!o.canBeEditable),this.$body.attr("data-style-name","none"),this.$body.attr("data-editor-margin","0%"),this.$editor.hide(),this.editor=new d({parent:this,initState:e,editMode:n,newFile:r,preferences:s,previewMode:this.previewMode,taskStatuses:this.taskStatuses}),this.editor.attach(this.$editor),this.$editor.off(".editor"),this.$editor.on("focus.editor",(function(){a.editor.focus()})),this.$editor.on("click.editor",(function(){a.editor.focus()})),this.state={docked:i,editMode:n,previewMode:this.previewMode,entry:o,dirty:!1,editModeFromPreview:!1,customHtml:this.editor.getCustomToolbarMenuHtml(),rightSideHtml:this.editor.getCustomToolbarRightSideMenuHtml(),canPrint:"application/x-smm"==o.mimeType||"application/x-stt"==o.mimeType,canSaveAsPdf:"application/x-smm"==o.mimeType||"application/x-stt"==o.mimeType,boundTasksStr:this.entry.boundTasksStr},this.updateRelatedSection(),this.$toolbar.empty().append(this.toolbarTmpl.renderToJQ(this.state)),this.renderName(),this.editor.addEventListener("editAttemptWhenNotEditable",this.onEditAttemptWhenNotEditable.bind(this)),this.editor.addEventListener("change",this.onDirtyChange.bind(this)),this.editor.addEventListener("linkClick",this.onLinkClick.bind(this)),this.editor.addEventListener("copy",this.onEditorCopy.bind(this)),this.editor.addEventListener("paste",this.onEditorPaste.bind(this)),this.triggerEvent("mimeTypeDetect",d.mimetype),this.triggerEvent("newFileFlagConsumed"),n&&this.showEditModeBanner(),this.$editor.show(),this.$editor.addClass("pf-scrollable-horizontal"),this.makeCustomScroll(this.$editor);var h=this.$editor.children(".pf-content");this.makeCustomScroll(h),this.$editor.data("pf-scroll").$content=h.data("pf-scroll").$content,this.previewMode&&this.addButtonsOverlay(),this.previewMode||this.editor&&this.editor.focus(),this.refreshPreviewMode(),this.updateToolbarItemsVisibility(),this.$main.find(".print-header").text(o.fileName),this.updatePaddingBottom(),this.fileLoadedDeferred.resolve()}},e.prototype.getStyleName=function(){return this.editor instanceof h.StyledEditor?this.editor&&this.editor.data&&this.editor.data.style?this.editor.data.style.name:"default":null},e.prototype.setStyle=function(t,e,i){this.$body.attr("data-style-name",t)},e.prototype.switchToEditMode=function(t){var e=this;if(this.editor.setEditMode(!0),this.showEditModeBanner(),t&&this.lastEditAttemptEventData){var i=this.lastEditAttemptEventData;this.lastEditAttemptEventData=null,this.editor instanceof l.Mindmap&&setTimeout((function(){r.JQuery(i.event.target).trigger(i.event)}),1),this.editor instanceof p.HtmlEdit&&setTimeout((function(){e.editor&&e.editor.focus()}),1)}this.state.editMode=!0,this.renderEditMode(),this.editor&&this.editor.focus()},e.prototype.setContent=function(t,e){this.currentViewId==t&&(this.editor.initState=e,this.editor.backToInitState(),this.previewMode||this.editor&&this.editor.focus())},e.prototype.updateContentPreview=function(t,e){this.currentViewId==t&&(this.editor.initState=e,this.editor.backToInitState(),this.refreshPreviewMode())},e.prototype.reset=function(){this.editor&&(this.editor.backToInitState(),this.editor.focus())},e.prototype.switchToEditModeAndChangeContent=function(t){this.editor&&(this.editor.initState=t,this.editor.backToInitState(),this.editor.setEditMode(!0),this.showEditModeBanner(),this.state.editMode=!0,this.renderEditMode(),this.editor.focus())},e.prototype.exitEditModeWithoutChange=function(){this.editor&&(this.editor.setEditMode(!1),this.state.editMode=!1,this.renderEditMode(),this.editor.focus())},e.prototype.exitEditModeWithConfirm=function(t){this.editor&&(this.editor.confirmSave(t),this.editor.setEditMode(!1),this.state.editMode=!1,this.renderEditMode(),this.editor.focus())},e.prototype.exitEditModeWithRevert=function(){this.editor&&(this.editor.backToInitState(),this.editor.setEditMode(!1),this.state.editMode=!1,this.renderEditMode(),this.editor.focus())},e.prototype.canGetState=function(){return null!=this.editor},e.prototype.getState=function(){return this.editor.beforeSave(),this.editor.getState()},e.prototype.getElements=function(){return this.editor.getElements()},e.prototype.isDirty=function(){return this.editor&&this.editor.isChanged()},e.prototype.updateEntry=function(t){this.state&&(this.state.entry=t,this.renderName(),this.updateRelatedSection())},e.prototype.confirmSave=function(t){this.editor&&(this.editor.confirmSave(t),this.editor.focus())},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.onEditAttemptWhenNotEditable=function(t){this.lastEditAttemptEventData=t,this.triggerEvent("enterEditModeByChange",!0)},e.prototype.onDirtyChange=function(t){this.state.dirty=t,this.renderDirty()},e.prototype.onLinkClick=function(t){this.triggerEventInTheSameTick("openUrl",t.url)},e.prototype.onSaveClick=function(){this.triggerEvent("save")},e.prototype.onHistoryClick=function(){this.triggerEvent("history")},e.prototype.onEnterEditModeClick=function(){this.triggerEvent("enterEditMode")},e.prototype.onExitEditModeClick=function(){this.triggerEvent("exitEditMode")},e.prototype.afterExitedEditMode=function(){if(this.editModeFromPreview){this.editModeFromPreview=!1,this.addButtonsOverlay(),this.previewMode=!0,this.state.previewMode=!0,this.state.editMode=!1,this.editor.editMode=!1;var t=this.$mainContent.find(".editor").detach();this.editorButtons.$buttons.detach(),this.$mainContent.empty(),this.$mainContent.append(t),this.$mainContent.append(this.editorButtons.$buttons)}},e.prototype.onExitEditModeAndCloseClick=function(){this.triggerEvent("exitEditModeAndClose")},e.prototype.onCloseClick=function(){this.triggerEvent("close")},e.prototype.onRenameClick=function(){this.triggerEvent("rename")},e.prototype.onOpenMindmapHelpClick=function(){this.triggerEvent("openMindmapHelp")},e.prototype.onReloadClick=function(){this.triggerEvent("reload")},e.prototype.onDistractionFreeModeToggleClick=function(){this.triggerEventInTheSameTick("distractionFreeModeToggle")},e.prototype.onPopupWindowClick=function(){this.triggerEvent("popupWindow")},e.prototype.renderDirty=function(){this.state.dirty?(this.$toolbar.find(".toolbar").addClass("dirty"),this.$toolbar.find(".toolbar [data-action=save]").prop("disabled",!1)):(this.$toolbar.find(".toolbar").removeClass("dirty"),this.$toolbar.find(".toolbar [data-action=save]").prop("disabled",!0)),this.state.editMode&&this.triggerEvent("dirtyChange",this.state.dirty)},e.prototype.renderEditMode=function(){this.state.editMode?(this.$toolbar.find(".toolbar").addClass("edit-mode"),this.$body.find(".context-menu-toolbar-more").addClass("edit-mode")):(this.$toolbar.find(".toolbar").removeClass("edit-mode"),this.$body.find(".context-menu-toolbar-more").removeClass("edit-mode")),this.refreshPreviewMode(),this.triggerEvent("dirtyChange",this.state.dirty)},e.prototype.renderName=function(){var t=this.state.entry.fileName.split("").reverse().join("");this.fontMetrics.add(t),this.fontMetrics.measure();var i=this.fontMetrics.getMaxTextLength(t,e.MAX_FILENAME_WIDTH,!1),n=(i<t.length?"...":"")+t.substr(0,i).split("").reverse().join("");this.$toolbar.find(".toolbar .file-name-with-rename-trigger .file-name").text(n),r.JQuery("body").find(".context-menu-file").remove()},e.prototype.showEditModeBanner=function(){var t=this.helper.i18n("plugin.editor.window.editor.editModeBanner.text"),e=this.createBanner(t);this.showAndHideBanner(e,500)},e.prototype.showSavingBanner=function(){if(!this.$savingBanner){var t=this.helper.i18n("plugin.editor.window.editor.savingBanner.text");this.$savingBanner=this.createBanner(t),this.showBanner(this.$savingBanner)}},e.prototype.hideSavingBanner=function(){var t=this;this.$savingBanner&&r.Q.delay(500).then((function(){t.hideBanner(t.$savingBanner).then((function(){delete t.$savingBanner}))}))},e.prototype.createBanner=function(t){return this.templateManager.createTemplate(d.func).renderToJQ({text:t})},e.prototype.showBanner=function(t){var e=this;return r.Q.Promise((function(i){e.$mainContent.append(t),t.animate({opacity:1},500,(function(){setTimeout((function(){i(null)}),500)}))}))},e.prototype.hideBanner=function(t){return r.Q.Promise((function(e){t.animate({opacity:0},500,(function(){t.remove(),e(null)}))}))},e.prototype.showAndHideBanner=function(t,e){var i=this;this.showBanner(t).then((function(){return r.Q.delay(e).then((function(){return i.hideBanner(t)}))}))},e.prototype.prepareForDistractionFreeMode=function(){var t=this,e=!1,i=!1;this.$body.on("distraction-free-mode-on",(function(){t.$body.addClass("distraction-free-mode"),t.$toolbar.css({top:-t.$toolbar.outerHeight()}),t.$statusBar.css({bottom:-t.$statusBar.outerHeight()}),i=!1,e=!1})),this.$body.on("distraction-free-mode-off",(function(){t.$body.removeClass("distraction-free-mode"),t.$toolbar.css({top:0}),t.$statusBar.css({bottom:0})})),this.$body.on("mousemove",(function(n){t.$body.hasClass("distraction-free-mode")&&(!i&&n.pageY<=5||i&&n.pageY<=t.$toolbar.outerHeight()?i||(i=!0,e=!1,t.$toolbar.stop(!0,!1).animate({top:0}),t.$statusBar.stop(!0,!1).animate({bottom:0})):t.showingFileMenu||t.$toolbar.trigger("mouseout")),t.lastMouseMoveEvent=n})),this.$body.on("mouseout",".toolbar-container,.status-bar",(function(n){if(t.$body.hasClass("distraction-free-mode")){if(t.$toolbar.find("[data-prevent-toolbar-hide-when-visible]:visible").length)return;if(n.pageY<=t.$toolbar.outerHeight())return;e||(e=!0,i=!1,t.$toolbar.stop(!0,!1).animate({top:-t.$toolbar.outerHeight()}),t.$statusBar.stop(!0,!1).animate({bottom:-t.$statusBar.outerHeight()}))}}))},e.prototype.refreshPreviewMode=function(){this.$mainContent.toggleClass("preview-mode",this.previewMode),this.$mainContent.toggleClass("pf-scrollable",this.previewMode),this.$mainContent.removeClass("released"),this.$buttonsOverlay=null;var t=this.$editor.find(".html-editor");t.attr("contenteditable",this.previewMode?"false":"true"),this.previewMode&&(t.removeClass("unselectable").addClass("selectable"),this.makeCustomScroll(this.$editor.parent()),this.addButtonsOverlay())},e.prototype.reopen=function(t,e){void 0===e&&(e=!1),this.currentViewId=t,(this.isViewLoaded()||e)&&this.triggerEvent("load")},e.prototype.release=function(t){this.destroyScroll(this.$editor),this.currentViewId=t,this.editor=null,this.$editor.html(""),this.$mainContent.addClass("released"),this.$toolbar.html(""),this.$buttonsOverlay=null},e.prototype.onDownloadClick=function(){this.triggerEvent("download")},e.prototype.onAttachToTaskClick=function(){this.triggerEvent("attachToTask")},e.prototype.onSendClick=function(){this.triggerEvent("send")},e.prototype.onPrintClick=function(){this.triggerEvent("print")},e.prototype.onSaveAsPdfClick=function(){this.triggerEvent("saveAsPdf")},e.prototype.onOpenEditWindowClick=function(t){if(!this.state.docked){this.editModeFromPreview=!0,this.state.editModeFromPreview=!0,this.removeButtonsOverlay(),this.previewMode=!1,this.state.previewMode=!1,this.state.editMode=!0,this.editor.editMode=!0;var e=this.$mainContent.find(".editor").detach();return this.$mainContent.empty().append("<div class='toolbar-container'></div>"),this.$toolbar=this.$mainContent.find(".toolbar-container"),this.toolbarTmpl=this.templateManager.createTemplate(a.func),this.$toolbar.empty().append(this.toolbarTmpl.renderToJQ(this.state)),this.renderName(),this.$mainContent.append(e),this.triggerEvent("enterFromPreviewToEditMode"),t.stopPropagation(),!1}},e.prototype.onEditorPaste=function(){this.triggerEvent("clipboardPaste")},e.prototype.onEditorCopy=function(t){this.triggerEvent("clipboardCopy",t)},e.prototype.clipboardPaste=function(t){this.editor.paste(t)},e.prototype.bindEditorKeyPresses=function(){var t=this;r.JQuery(document).on("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey&&83==e.keyCode)return t.triggerEvent("save"),!1;e.keyCode===r.webUtils.KEY_CODES.downArrow?t.previewMode&&(e.preventDefault(),t.scrollPreview(!1)):e.keyCode===r.webUtils.KEY_CODES.upArrow?t.previewMode&&(e.preventDefault(),t.scrollPreview(!0)):e.keyCode==r.webUtils.KEY_CODES.openBracket&&r.webUtils.WebUtils.hasCtrlModifier(e)?t.setSmallerFontSize():e.keyCode==r.webUtils.KEY_CODES.closeBraket&&r.webUtils.WebUtils.hasCtrlModifier(e)&&t.setLargerFontSize()}))},e.prototype.setSmallerFontSize=function(){this.setAdjacentFontSize(-1)},e.prototype.setLargerFontSize=function(){this.setAdjacentFontSize(1)},e.prototype.setAdjacentFontSize=function(t){if(this.editor&&this.editor instanceof h.StyledEditor){var e=this.getAvailableFontSizesArray(),i=this.editor.getFontSize(),n=e.filter((function(t){return t.cssSize==i}))[0];if(n){var o=e.indexOf(n)+t;if(!(o<0||o>e.length-1)){var r=e[o];this.editor.setStyle(void 0,r.cssSize,void 0)}}}},e.prototype.getAvailableFontSizesArray=function(){var t=[];for(var e in r.component.mindmap.Mindmap.AVAILABLE_FONT_SIZES){var i=r.component.mindmap.Mindmap.AVAILABLE_FONT_SIZES[e];t.push({cssSize:e,displayedSize:i})}return t.sort((function(t,e){return parseFloat(t.cssSize)-parseFloat(e.cssSize)}))},e.prototype.scrollPreview=function(t){var e=this.$editor.children(".pf-content").children(".pf-content"),i=e.scrollTop();e.scrollTop(t?i-40:i+40)},e.prototype.addButtonsOverlay=function(){var t=this.$mainContent.find(".editor").detach();this.editorButtons.$buttons.removeClass("hidden-buttons"),this.$mainContent.append(t)},e.prototype.removeButtonsOverlay=function(){this.editorButtons.$buttons.addClass("hidden-buttons")},e.prototype.doInnerElementsFit=function(t){if(t)return t.clientHeight<50},e.prototype.getElementWidth=function(t){var e=window.getComputedStyle(t),i=0;return i+=t.offsetWidth,i+=parseFloat(e.marginLeft)+parseFloat(e.marginRight),i+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i+=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)},e.prototype.onOpenToolbarMoreClick=function(){var t=this.$mainContent.find(".context-menu-toolbar-more"),e=t.find(".context-menu-content"),i=this.$toolbar.find("button[data-action]"),n=i.first().offset().top+10;e.empty();var o=!0,s=!1;i.each((function(t,i){var a=r.JQuery(i),d=a.is("[data-action=open-tools-menu]"),l=a.parent().is(".context-menu-content");if(l||a.offset().top>n||a.hasClass("float-right")&&(a.parent().hasClass("invisible")||a.parent().parent().hasClass("invisible"))){if(d)return void(s=!0);if(l&&!s)return;var c=a.parent();if(!c.is(".style-switcher")&&!c.is(".font-size-switcher")){var p=a.clone(!0);l&&(c=c.parent().parent()),p.toggleClass("read-mode-buttons",c.hasClass("read-mode-buttons")),p.toggleClass("edit-mode-buttons",c.hasClass("edit-mode-buttons")),e.append(p),o=!1}}else(d||!d&&!l)&&(s=!1)})),o||t.addClass("visible")},e.prototype.onCloseToolbarMoreClick=function(){this.$mainContent.find(".context-menu-toolbar-more").removeClass("visible"),this.$mainContent.find(".context-menu-toolbar-tools").removeClass("visible")},e.prototype.onToolbarMoreItemClick=function(t){r.JQuery(t.currentTarget).is(":disabled")||this.$mainContent.find(".context-menu-toolbar-more").removeClass("visible")},e.prototype.onToolbarToolsItemClick=function(t){r.JQuery(t.currentTarget).is(":disabled")||this.$mainContent.find(".context-menu-toolbar-tools").removeClass("visible")},e.prototype.onToolbarToolsClick=function(t){var e=r.JQuery(t.currentTarget),i=e.offset();if(!e.is(":disabled")){var n=e.parent().find(".context-menu-toolbar-tools");n.find("style").remove();var o=e.outerWidth()/2;n.append("<style type='text/css'>.context-menu-toolbar-tools .context-menu-content:before { right: auto; left: "+o+"px; }</style>"),n.find(".context-menu-content").css({right:"auto",left:i.left}),n.addClass("visible")}},e.prototype.onTaskClick=function(t){if(!r.JQuery.contains(this.taskChooser.$main[0],t.target)){var e=r.JQuery(t.target).closest("[data-task-id]").data("task-id");this.taskChooser.movePopup(t.pageX,t.pageY,300,150),this.triggerEvent("openTask",e)}},e.prototype.prepareToPrint=function(t){var e=this;void 0===t&&(t=!1),this.html2canvasScaleMultiplier=1,this.fileLoadedDeferred.promise.then((function(){if(t){var i=e.$main.find(".main-content").first().find(".mindmap-root .mindmap");if(i.length>0){var n=i.parent().innerWidth(),o=i.find("svg").outerWidth(!0),r=o>n?n/o:1;e.html2canvasScaleMultiplier=1/r,i.css({transform:"scale("+r+")",transformOrigin:"left top",marginTop:"10px"})}}frameElement.style.height=document.body.clientHeight+"px",e.triggerEvent("preparedToPrint")}))},e.prototype.saveAsPdf=function(){var t=this;this.fileLoadedDeferred.promise.then((function(){var e=t.$main.find(".main-content").first(),i=e.find(".mindmap-root .mindmap");if(i.length>0){i.find("path").css({stroke:"#ccc",strokeWidth:"1px",fill:"none"}),i.find(".node.selected").removeClass("selected");for(var n=i.height()+10,o=i.parent();o.length>0;)o.height(n),o=o.parent();e.find(".mindmap-root .mindmap").replaceWith(i)}e.width(e.width()),e.height(e.height()+10),html2pdf().from(e[0]).set({margin:16,filename:t.entry.fileName.substr(0,t.entry.fileName.lastIndexOf("."))+".pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2*t.html2canvasScaleMultiplier},jsPDF:{unit:"pt",format:"A4",orientation:"portrait"}}).output().then((function(e){t.triggerEvent("pdfOutput",e)}))}))},e.prototype.setBoundTasksStr=function(t){this.state&&(this.state.boundTasksStr=t,this.$toolbar.empty().append(this.toolbarTmpl.renderToJQ(this.state)),this.renderName())},e.prototype.updateTaskStatuses=function(){var t=this,e=this.editor.getState().match(/\B#[0-9]{3,}\b/g);if(e){for(var i={},n=0,o=e;n<o.length;n++){i[o[n].substr(1)]=!0}var r=Object.keys(i);this.channelPromise("getTaskStatuses",JSON.stringify(r)).then((function(e){t.setTaskStatuses(e)}))}},e.prototype.setTaskStatuses=function(t){var e=JSON.parse(t),i=!1;for(var n in e)this.taskStatuses[n]!=e[n]&&(i=!0,this.taskStatuses[n]=e[n]);for(var n in this.taskStatuses)this.taskStatuses[n]!=e[n]&&(i=!0,delete this.taskStatuses[n]);i&&this.editor&&this.editor.updateTaskBadges()},e.prototype.updateRelatedSection=function(){this.editor&&this.state&&this.state.entry&&(this.editor.relatedHostHash=this.state.entry.hostHash,this.editor.relatedSectionId=this.state.entry.sectionId)},e.prototype.updateFileName=function(t,e,i){this.state&&this.state.entry&&this.state.entry.fileName&&(this.state.entry.fileName=t),this.$toolbar.find(".file-name").text(t)},e.prototype.updatePaddingBottom=function(){if(this.state&&!this.state.editMode){var t=this.editorButtons.getButtonsHeight();this.$editor.find(".editor-textarea").css("padding-bottom",t+12)}},e.prototype.onLockFileClick=function(t){this.triggerEvent("lockFile")},e.prototype.onUnlockFileClick=function(t){this.triggerEvent("unlockFile")},e.prototype.updateLockInfoOnActionButtons=function(t,e){var i=t&&e;this.$toolbar.find("[data-action=unlock]").toggleClass("hide",!i),this.$toolbar.find("[data-action=lock]").toggleClass("hide",t)},e.MAX_FILENAME_WIDTH=230,e}(r.window.base.BaseWindowView);i.EditorWindowView=u,u.prototype.className="com.privmx.plugin.editor.window.editor.EditorWindowView"},{"./editors/HtmlEdit":18,"./editors/Mindmap":20,"./editors/StyledEditor":22,"./editors/TextEdit":23,"./template/editor-banner.html":25,"./template/main.html":26,"./template/toolbar.html":29,"pmc-web":12}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("pmc-web"),o=function(){function t(t){this.relatedHostHash=null,this.relatedSectionId=null,this.parent=t.parent,this.editMode=t.editMode,this.newFile=t.newFile,this.preferences=t.preferences||{},this.previewMode=t.previewMode,this.taskStatuses=t.taskStatuses,this.listeners={},this.$body=n.JQuery("body"),this.setCurrentState(t.initState),this.initState=this.getState()}return t.prototype.initContainer=function(){this.$container=n.JQuery("<div class='editor-inner'></div>")},t.prototype.createDataFromState=function(t){throw new Error("Unimplemented")},t.prototype.paste=function(t){},t.prototype.beforeSave=function(){},t.prototype.getState=function(){throw new Error("Unimplemented")},t.prototype.getElements=function(){throw new Error("Unimplemented")},t.prototype.render=function(){this.rendered||(this.rendered=!0,this.$container.html(""),this.$container.append("<div>"+this.data+"</div>"))},t.prototype.attach=function(t){this.render(),t.append(this.$container)},t.prototype.detach=function(){this.$container.detach()},t.prototype.focus=function(){},t.prototype.isChanged=function(){return this.initState!=this.getState()},t.prototype.setEditMode=function(t){this.editMode=t},t.prototype.confirmSave=function(t){this.initState=t,this.triggerEvent("change",!1)},t.prototype.setCurrentState=function(t){if(this.data=this.createDataFromState(t),this.rendered){var e=this.$container;this.initContainer(),this.rendered=!1,this.render(),e.replaceWith(this.$container)}else this.initContainer(),this.rendered=!1;this.triggerEvent("change",!1)},t.prototype.backToInitState=function(){this.setCurrentState(this.initState)},t.prototype.addEventListener=function(t,e){if("function"!=typeof e)throw new Error("Callback is not a function");this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.triggerEvent=function(t,e){this.listeners[t]&&this.listeners[t].forEach((function(t){t(e)}))},t.prototype.getCustomToolbarMenuHtml=function(){return""},t.prototype.getCustomToolbarRightSideMenuHtml=function(){return""},t.prototype.updateLayout=function(){},t.prototype.updateTaskBadges=function(){},t.clazz="Editor",t}();i.Editor=o,o.prototype.className="com.privmx.plugin.editor.window.editor.editors.Editor"},{"pmc-web":12}],18:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("./JsonEditor"),s=t("pmc-web"),a=t("pmc-web"),d=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.initContainer=function(){this.$container=s.JQuery('<div class="editor-inner html-editor-container"></div>'),this.initStyle()},e.prototype.sanitize=function(t){return t=t.replace(/(\r\n|\r|\n)/g,"<br>"),s.webUtils.ContentEditableEditor.safeHtml(t,void 0,this.taskStatuses,!0)},e.prototype.createDataFromState=function(t){var e=this,i=t?JSON.parse(t):{},n=i.content;i.style={name:i.style&&i.style.name&&i.style.name in a.component.mindmap.Mindmap.AVAILABLE_STYLES?i.style.name:a.component.mindmap.Mindmap.DEFAULT_STYLE_NAME,fontSize:i.style&&i.style.fontSize&&i.style.fontSize in a.component.mindmap.Mindmap.AVAILABLE_FONT_SIZES?i.style.fontSize:a.component.mindmap.Mindmap.DEFAULT_FONT_SIZE,margin:i.style&&i.style.margin&&i.style.margin in a.component.mindmap.Mindmap.AVAILABLE_MARGINS?i.style.margin:a.component.mindmap.Mindmap.DEFAULT_MARGIN};var o=s.webUtils.ContentEditableEditorMetaData.fromString(i.metaDataStr);n=(n=o.attach(n))?this.sanitize(n):"";var r=s.JQuery("<div>").addClass("editor-textarea html-editor"),d=new s.webUtils.ContentEditableEditor(r,{onKeyDown:this.inputEventsHandler.bind(this),onPaste:this.inputEventsHandler.bind(this),onCut:this.inputEventsHandler.bind(this),onInput:this.inputEventsHandler.bind(this),onRequestTaskPicker:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.parent.onTaskPickerResult(d.onTaskPickerResult.bind(d)),(t=e.parent).onRequestTaskPicker.apply(t,i)},onRequestFilePicker:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.parent.onFilePickerResult(d.onFilePickerResult.bind(d)),(t=e.parent).onRequestFilePicker.apply(t,i)},relatedHostHash:function(){return e.relatedHostHash},relatedSectionId:function(){return e.relatedSectionId}});return d.setValue(n,!0,this.editMode),d.meta=o,{editor:d,style:i.style,metaDataStr:i.metaDataStr}},e.prototype.getObjectState=function(){var t=this.data.editor.getValue(),e=s.webUtils.ContentEditableEditorMetaData.extractMetaFromHtml(t),i=e.metaData;return{content:e.html,style:this.data.style,metaDataStr:JSON.stringify(i)}},e.prototype.confirmSave=function(e){t.prototype.confirmSave.call(this,e),this.data.editor.setCurrentValueAsDefault(),this.triggerEvent("change",!1)},e.prototype.render=function(){this.rendered||(this.rendered=!0,this.$container.html(""),this.$container.append(this.data.editor.$elem))},e.prototype.focus=function(){this.data&&this.data.editor&&this.data.editor.focus()},e.prototype.inputEventsHandler=function(t){switch(t.type){case"input":this.triggerEvent("change",this.isChanged());break;case"keydown":if((t.ctrlKey||t.metaKey)&&(65==t.keyCode||67==t.keyCode))return;if(-1!=l.indexOf(t.keyCode))return;case"cut":case"paste":if(!this.editMode)return this.triggerEvent("editAttemptWhenNotEditable",{event:t}),!1}switch(t.type){case"input":this.data.editor.onInput(t);break;case"paste":this.data.editor.onPaste(t);break;case"cut":this.data.editor.onCut(t);break;case"keydown":this.data.editor.onKeyDown(t)}this.triggerEvent("change",this.isChanged())},e.prototype.updateTaskBadges=function(){this.data.editor.setValue(this.data.editor.getValue())},e.clazz="HtmlEdit",e.mimetype="application/x-stt",e}(r.JsonEditor);i.HtmlEdit=d;var l=[16,17,18,19,20,27,33,34,35,36,37,38,39,40,44,93,112,114,115,116,117,118,119,120,121,122,123,144,145];d.prototype.className="com.privmx.plugin.editor.window.editor.editors.HtmlEdit"},{"./JsonEditor":19,"pmc-web":12}],19:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.createDataFromState=function(t){return this.createDataFromObject(""==t?null:JSON.parse(t))},e.prototype.getState=function(){return JSON.stringify(this.getObjectState())},e.prototype.createDataFromObject=function(t){throw new Error("Unimplemented")},e.prototype.getObjectState=function(){throw new Error("Unimplemented")},e.clazz="JsonEditor",e}(t("./StyledEditor").StyledEditor);i.JsonEditor=r,r.prototype.className="com.privmx.plugin.editor.window.editor.editors.JsonEditor"},{"./StyledEditor":22}],20:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("./JsonEditor"),s=t("document-element"),a=t("../template/custom-toolbar-mindmap.html"),d=t("../template/right-side-toolbar-mindmap.html"),l=t("pmc-web"),c=t("./MindmapConverter"),p=function(t){function e(e){var i=t.call(this,e)||this,n=i.parent.viewManager.getTemplateManager().getHelperByClass(l.webUtils.MailClientViewHelper);return i.nodeLabelFilters=[function(t,e){var i=n.i18n("plugin.editor.window.editor.content.link.click.helper.text");e(n.linkify(t,!0,i,!0))}],i}return o(e,t),e.prototype.initContainer=function(){this.$container=l.JQuery('<div class="editor-inner mindmap-editor-container"></div>'),this.initStyle()},e.prototype.getObjectState=function(){return{elements:this.data.doc.save(),version:this.data.version,style:this.data.style}},e.prototype.paste=function(t){"MindMapElement"in t?this.data.doc.paste(JSON.parse(t.MindMapElement)):"text"in t&&this.data.doc.paste(c.MindmapConverter.convertTextToMindMap(t.text.split("\n")))},e.prototype.getElements=function(){return this.data.doc.elements},e.prototype.createDataFromObject=function(t){t=null!=t?t:{elements:[{klass:"MindMapElement",spec:{label:"Root",nodes:[]}}],style:null,version:1},Array.isArray(t)&&(t={elements:t,style:null,version:1});var e=l.JQuery('<div class="mindmap-root" tabindex="-1"></div>');e.on("paste","[contenteditable=true]",l.webUtils.ContentEditableEditor.defaultPasteHandler),l.JQuery("body").prepend(e);var i=new s.Document;i.setEditable(this.editMode),i.setExternalClipboard(!0);var n=t.elements;for(var o in n)if(n[o].klass in s){var r=l.JQuery("<div></div>").appendTo(e),a=i.addElement(s[n[o].klass],n[o].spec);if("MindMapElement"==n[o].klass){for(var d in this.nodeLabelFilters)a.filters.add("node.label",this.nodeLabelFilters[d]);a.setEditor(new s.MindMapEditor),a.setEditable(i.editable)}a.render(r,{autoFocus:!this.previewMode,skipNavigationInfoOnDirtyCheck:!1})}return e.detach(),e.on("focus",(function(){i&&l.JQuery(i).focus()})),this.bindDocEvents(i),{doc:i,$view:e,style:t.style,version:t.version}},e.prototype.render=function(){this.rendered||(this.rendered=!0,this.$container.html(""),this.$container.append(this.data.$view),this.$container.append(this.$help))},e.prototype.updateLayout=function(){var t=this.data.doc.elements[0].mm;t.layout(t.tree)},e.prototype.confirmSave=function(t){this.initState=t,this.data.doc.confirmSave()},e.prototype.focus=function(){var t=this.data.$view.find(".mindmap");if(t&&t.focus(),this.newFile){this.newFile=!1;var e=this.data.doc.elements[0].mm,i=e.createNode({label:"",nodes:[]},!0);e.appendNode(i,e.selected),e.layout(e.tree),e.select(i),e.enterEditMode(!0)}},e.prototype.setEditMode=function(t){this.editMode=t,this.editMode||this.data.doc.elements[0].mm.exitEditMode(),this.data.doc.setEditable(this.editMode)},e.prototype.beforeSave=function(){this.editMode&&this.data.doc.elements[0].mm.exitEditMode()},e.prototype.bindDocEvents=function(t){var e=this;l.JQuery(t).on("copy.document",(function(t,i){var n={};n.text=c.MindmapConverter.getRawAsFlatText(i),n.MindMapElement=JSON.stringify(i),e.triggerEvent("copy",n)})),l.JQuery(t).on("paste.document",(function(t){e.triggerEvent("paste")})),l.JQuery(t).on("editAttemptWhenNotEditable.document",(function(t,i){e.triggerEvent("editAttemptWhenNotEditable",i)})),l.JQuery(t).on("change.document",(function(){e.triggerEvent("change",e.isChanged())})),l.JQuery(t).on("clickWithControl.document",(function(t,i){var n=l.JQuery(i.event.target).data("url");return n&&e.triggerEvent("linkClick",{elem:i.event.target,url:n}),!1}))},e.prototype.getCustomToolbarMenuHtml=function(){var t=this.getStyleSwitcherTemplateModel();return this.parent.viewManager.getTemplateManager().createTemplate(a.func).render(t)},e.prototype.getCustomToolbarRightSideMenuHtml=function(){return this.parent.viewManager.getTemplateManager().createTemplate(d.func).render()},e.clazz="Mindmap",e.mimetype="application/x-smm",e}(r.JsonEditor);i.Mindmap=p,p.prototype.className="com.privmx.plugin.editor.window.editor.editors.Mindmap"},{"../template/custom-toolbar-mindmap.html":24,"../template/right-side-toolbar-mindmap.html":27,"./JsonEditor":19,"./MindmapConverter":21,"document-element":10,"pmc-web":12}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.convertTextToMindMap=function(e){var i=[],n=[];if(0==e.length)return null;t.getTabLevel(e[0]);for(var o=i,r=0;r<e.length;r++){var s=t.getTabLevel(e[r]),a=t.getParentElem(r,s,n);o=a?a.childrenObjs:i;var d=t.removeR(e[r].trim());d.length>0&&(o.push({label:d,nodes:[]}),n.push({id:r,level:s,childrenObjs:o[o.length-1].nodes}))}return i},t.getParentElem=function(t,e,i){for(var n=i.length-1;n>=0;--n)if(i[n].id<t&&i[n].level<e)return i[n];return null},t.removeR=function(t){return t.replace("\r","")},t.getTabLevel=function(t){for(var e=0,i=0;i<t.length&&("\t"==t.charAt(i)||" "==t.charAt(i));i++)e++;return e},t.reduceTabs=function(e){var i=[];if(0==e.length)return[];for(var n=t.getTabLevel(e[0]),o="",r=0;r<n;r++)o+="\t";for(var s=0;s<e.length&&0==e[s].indexOf(o);s++)i.push(e[s].substr(n));return i},t.getChildElements=function(e,i){for(var n=t.getTabLevel(e[i]),o=[],r=i+1;r<e.length;r++){if(!(t.getTabLevel(e[r])>n))break;o.push(e[r])}return o},t.getRawAsFlatText=function(e){return t.singleElementAsText(e,1)+"\n"},t.singleElementAsText=function(e,i){if(!e)return"";var n=e.label,o=Array(i+1).join("\t");return e.nodes&&e.nodes.length>0&&e.nodes.forEach((function(e){n+="\n"+o+t.singleElementAsText(e,i+1)})),n},t}();i.MindmapConverter=n,n.prototype.className="com.privmx.plugin.editor.window.editor.editors.MindmapConverter"},{}],22:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("./Editor"),s=t("../template/style-switcher.html"),a=t("pmc-web"),d=t("pmc-web"),l=function(t){function e(e){var i=t.call(this,e)||this;return i.styleSwitcherID=["id",Math.random().toString(36).substr(2,5),(new Date).getTime()].join("-"),i.bindStyleSwitcherEvents(),i}return o(e,t),e.prototype.initContainer=function(){t.prototype.initContainer.call(this),this.initStyle()},e.prototype.bindStyleSwitcherEvents=function(){a.JQuery("body").on("click","#"+this.styleSwitcherID+" [data-action=switch-style]",this.onSwitchStyleClick.bind(this)),a.JQuery("body").on("click","#"+this.styleSwitcherID+" [data-action=open]",this.onSwitchStyleTriggerClick.bind(this)),a.JQuery("body").on("click","#"+this.styleSwitcherID+" .backdrop",this.onSwitchStyleBackdropClick.bind(this)),a.JQuery("body").on("click","#"+this.styleSwitcherID+" [data-action=switch-font-size]",this.onSwitchFontSizeClick.bind(this)),a.JQuery("body").on("click","#"+this.styleSwitcherID+" [data-action=switch-margin]",this.onSwitchMarginClick.bind(this)),a.JQuery("body").on("click","#font-size-"+this.styleSwitcherID+" [data-action=open]",this.onSwitchFontSizeTriggerClick.bind(this)),a.JQuery("body").on("click","#font-size-"+this.styleSwitcherID+" .backdrop",this.onSwitchFontSizeBackdropClick.bind(this))},e.prototype.initStyle=function(){this.data.style&&this.data.style.name?this.$body.attr("data-style-name",this.data.style.name):this.$body.attr("data-style-name",this.preferences.style||"default"),this.$container.css("font-size",this.data.style&&this.data.style.fontSize?this.data.style.fontSize:d.component.mindmap.Mindmap.DEFAULT_FONT_SIZE),this.setMargin(this.data.style.margin)},e.prototype.setStyle=function(t,e,i){t||e||i?(this.data.style={name:t||(this.data.style?this.data.style.name:d.component.mindmap.Mindmap.DEFAULT_STYLE_NAME),fontSize:e||(this.data.style?this.data.style.fontSize:d.component.mindmap.Mindmap.DEFAULT_FONT_SIZE),margin:i||(this.data.style?this.data.style.margin:d.component.mindmap.Mindmap.DEFAULT_MARGIN)},this.$body.attr("data-style-name",t)):(this.data.style={},this.$body.removeAttr("data-style-name")),this.$container.css("font-size",this.data.style&&this.data.style.fontSize?this.data.style.fontSize:d.component.mindmap.Mindmap.DEFAULT_FONT_SIZE),this.setMargin(this.data.style.margin),this.triggerEvent("change",this.isChanged()),this.refreshStyleSwitcherStateView(),this.refreshFontSizeSwitcherStateView(),this.focus()},e.prototype.setMargin=function(t){this.$body.attr("data-editor-margin",t)},e.prototype.getStyleSwitcherTemplateModel=function(){return{id:this.styleSwitcherID,style:this.data.style}},e.prototype.getFontSizeSwitcherTemplateModel=function(){return{id:this.styleSwitcherID,style:this.data.style}},e.prototype.getCustomToolbarMenuHtml=function(){var t=this.getStyleSwitcherTemplateModel();return this.parent.viewManager.getTemplateManager().createTemplate(s.func).render(t)},e.prototype.getCustomToolbarRightSideMenuHtml=function(){return""},e.prototype.getStyleSwitcher=function(){return a.JQuery("#"+this.styleSwitcherID)},e.prototype.getFontSizeSwitcher=function(){return a.JQuery("#font-size-"+this.styleSwitcherID)},e.prototype.refreshStyleSwitcherStateView=function(){var t=a.JQuery("#"+this.styleSwitcherID).find("[data-action=switch-style]");t.filter(".active").removeClass("active"),this.data.style&&this.data.style.name&&t.filter('[data-name="'+this.data.style.name+'"]').addClass("active"),this.refreshFontSizeSwitcherStateView(),this.refreshMarginSwitcherStateView()},e.prototype.refreshFontSizeSwitcherStateView=function(){var t=a.JQuery("#"+this.styleSwitcherID).find("[data-action=switch-font-size]");t.filter(".active").removeClass("active"),this.data.style&&this.data.style.fontSize&&t.filter('[data-name="'+this.data.style.fontSize+'"]').addClass("active")},e.prototype.refreshMarginSwitcherStateView=function(){var t=a.JQuery("#"+this.styleSwitcherID).find("[data-action=switch-margin]");t.filter(".active").removeClass("active"),this.data.style&&this.data.style.margin&&t.filter('[data-name="'+this.data.style.margin+'"]').addClass("active")},e.prototype.onSwitchStyleClick=function(t){this.setStyle(a.JQuery(t.currentTarget).data("name"),void 0,void 0),this.hideStyleSwitcher()},e.prototype.onSwitchFontSizeClick=function(t){this.setStyle(void 0,a.JQuery(t.currentTarget).data("name"),void 0),this.hideStyleSwitcher()},e.prototype.onSwitchMarginClick=function(t){this.setStyle(void 0,void 0,a.JQuery(t.currentTarget).data("name")),this.hideStyleSwitcher()},e.prototype.onSwitchStyleTriggerClick=function(){this.toggleStyleSwitcher()},e.prototype.onSwitchFontSizeTriggerClick=function(){this.toggleFontSizeSwitcher()},e.prototype.onSwitchStyleBackdropClick=function(){this.hideStyleSwitcher()},e.prototype.onSwitchFontSizeBackdropClick=function(){this.hideFontSizeSwitcher()},e.prototype.hideStyleSwitcher=function(){var t=this.getStyleSwitcher();t.removeClass("open"),t.closest(".toolbar-container").trigger("mouseout")},e.prototype.hideFontSizeSwitcher=function(){var t=this.getFontSizeSwitcher();t.removeClass("open"),t.closest(".toolbar-container").trigger("mouseout")},e.prototype.showStyleSwitcher=function(){this.refreshStyleSwitcherStateView(),this.getStyleSwitcher().addClass("open")},e.prototype.showFontSizeSwitcher=function(){this.refreshFontSizeSwitcherStateView(),this.getFontSizeSwitcher().addClass("open")},e.prototype.toggleStyleSwitcher=function(){this.getStyleSwitcher().hasClass("open")?this.hideStyleSwitcher():this.showStyleSwitcher()},e.prototype.toggleFontSizeSwitcher=function(){this.getFontSizeSwitcher().hasClass("open")?this.hideFontSizeSwitcher():this.showFontSizeSwitcher()},e.prototype.getFontSize=function(){return this.data.style&&this.data.style.fontSize&&this.data.style.fontSize in d.component.mindmap.Mindmap.AVAILABLE_FONT_SIZES?this.data.style.fontSize:d.component.mindmap.Mindmap.DEFAULT_FONT_SIZE},e.prototype.getMargin=function(){return this.data.style&&this.data.style.margin&&this.data.style.margin in d.component.mindmap.Mindmap.AVAILABLE_MARGINS?this.data.style.margin:d.component.mindmap.Mindmap.DEFAULT_MARGIN},e.clazz="StyledEditor",e}(r.Editor);i.StyledEditor=l,l.prototype.className="com.privmx.plugin.editor.window.editor.editors.StyledEditor"},{"../template/style-switcher.html":28,"./Editor":17,"pmc-web":12}],23:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("./Editor"),s=t("pmc-web"),a=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.initContainer=function(){this.$container=s.JQuery('<div class="editor-inner text-editor-container"></div>')},e.prototype.standardizeNewline=function(t){return t.replace("\r\n","\n").replace("\r","\n")},e.prototype.createDataFromState=function(t){var e=null==t?"":this.standardizeNewline(t),i=s.JQuery("<textarea>").addClass("form-control editor-textarea");return i.prop("defaultValue",e),this.bindTextareaEvents(i),this.$textarea=i,this.updateTextareaEditable(),{$textarea:i}},e.prototype.getState=function(){return this.standardizeNewline(this.data.$textarea.val())},e.prototype.confirmSave=function(e){t.prototype.confirmSave.call(this,e);var i=this.data.$textarea.val();this.data.$textarea.prop("defaultValue",i),this.triggerEvent("change",!1)},e.prototype.render=function(){this.rendered||(this.rendered=!0,this.$container.html(""),this.$container.append(this.data.$textarea))},e.prototype.isChanged=function(){return(null==this.initState?null:this.standardizeNewline(this.initState))!=this.getState()},e.prototype.focus=function(){this.data&&this.data.$textarea&&this.data.$textarea.focus()},e.prototype.setEditMode=function(t){this.editMode=t,this.updateTextareaEditable()},e.prototype.updateTextareaEditable=function(){this.$textarea&&this.$textarea.prop("readonly",!this.editMode)},e.prototype.bindTextareaEvents=function(t){var e=this;t.on("cut paste keydown",(function(t){if("keydown"==t.type){if((t.ctrlKey||t.metaKey)&&(65==t.keyCode||67==t.keyCode))return;if(-1!=[16,17,18,19,20,27,33,34,35,36,37,38,39,40,44,93,112,113,114,115,116,117,118,119,120,121,122,123,144,145].indexOf(t.keyCode))return}if(!e.editMode)return e.triggerEvent("editAttemptWhenNotEditable",t),!1})),t.on("keydown",(function(t){if(9==t.keyCode&&e.editMode){var i=t.currentTarget,n=s.JQuery(i),o=i.selectionStart,r=i.selectionEnd,a=n.val();return n.val(a.substring(0,o)+"\t"+a.substring(r)),i.selectionStart=i.selectionEnd=o+1,!1}})),t.on("input",(function(t){var i=t.currentTarget;e.triggerEvent("change",i.value!=i.defaultValue)}))},e.clazz="TextEdit",e.mimetype="text/plain",e}(r.Editor);i.TextEdit=a,a.prototype.className="com.privmx.plugin.editor.window.editor.editors.TextEdit"},{"./Editor":17,"pmc-web":12}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./style-switcher.html");i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var o="",r=function(t){o+=t};return r(i.createTemplate(n.func).render(t)),r("\n"),o}}},{"./style-switcher.html":28}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="",o=function(t){n+=t};return o('<div class="editor-banner">\n  <div class="inner">\n    <div class="text">'),o(i.escapeHtml(t.text)),o("</div>\n  </div>\n</div>\n"),n}}},{}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="";return n+='<div class="window-editor-main">\n  <div class="left-margin-overlay"></div>\n  <div class="right-margin-overlay"></div>\n  <div class="notifications"></div>\n  <div class="main-content">\n    <div class="toolbar-container" data-html2canvas-ignore="true"></div>\n    <div class="print-header"></div>\n    <div class="editor"></div>\n    <div class="status-bar" data-html2canvas-ignore="true"></div>\n  </div>\n</div>'}}},{}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="",o=function(t){n+=t};return o('<button data-action="open-mindmap-help" data-window-opener="true" class="btn float-right"><i class="fa ico-question-mark"></i> '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.openMindmapHelp.label"))),o("</button>\n"),n}}},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("pmc-web");i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var o="",r=function(t){o+=t},s=t.style&&t.style.name,a=i.getAvailableNotesStyles(),d=t.style&&t.style.fontSize,l=n.component.mindmap.Mindmap.AVAILABLE_FONT_SIZES,c=t.style&&t.style.margin,p=n.component.mindmap.Mindmap.AVAILABLE_MARGINS;for(var h in r('\n<div class="style-switcher" id="'),r(i.escapeHtml(t.id)),r('">\n  <button class="btn" data-action="open">\n      <i class="fa fa-paint-brush"></i> Style <span class="ico-arrow-down trigger"></span>\n  </button>\n  <ul data-prevent-toolbar-hide-when-visible="true">\n    '),a)r('\n      <li class="'),r(i.escapeHtml(s==h?"active":"")),r('" data-action="switch-style" data-name="'),r(i.escapeHtml(h)),r('">\n        '),r(i.escapeHtml(a[h])),r('\n        <span class="preview" data-style-name="'),r(i.escapeHtml(h)),r('">abc</span>\n      </li>\n    ');for(var u in r('\n    <li class="divider"></li>\n    '),l)r('\n      <li class="'),r(i.escapeHtml(d==u?"active":"")),r('" data-action="switch-font-size" data-name="'),r(i.escapeHtml(u)),r('">\n        '),r(i.escapeHtml(l[u])),r('\n        <span class="preview" style="font-size:'),r(i.escapeHtml(u)),r('">abc</span>\n      </li>\n    ');for(var m in r('\n    <li class="divider"></li>\n    '),p)r('\n      <li class="'),r(i.escapeHtml(c==m?"active":"")),r('" data-action="switch-margin" data-name="'),r(i.escapeHtml(m)),r('">\n        '),r(i.escapeHtml(i.i18n(p[m]))),r("\n      </li>\n    ");return r('\n  </ul>\n  <div class="backdrop"></div>\n</div>\n'),o}}},{"pmc-web":12}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="",o=function(t){n+=t};o('\n<div class="toolbar  '),o(i.escapeHtml(t.editMode?"edit-mode":"")),o(" "),o(i.escapeHtml(t.dirty?"dirty":"")),o('">\n  \n  <span class="file-name-with-rename-trigger">\n    '),t.docked&&o('\n      <i class="fa fa-circle dirty-marker"></i>\n    '),o("\n    "),".stx"==t.entry.extl||".stt"==t.entry.extl||".pmxtt"==t.entry.extl?o('\n      <i class="file-icon fa fa-font"></i>\n    '):".smm"==t.entry.extl||".pmxmm"==t.entry.extl?o('\n      <i class="file-icon fa privmx-icon privmx-icon-mindmap"></i>\n    '):".sss"==t.entry.extl?o('\n      <i class="file-icon fa fa-table"></i>\n    '):o('\n      <i class="file-icon fa fa-file"></i>\n    '),o('\n    <span class="file-name">'),o(i.escapeHtml(t.entry.fileName)),o('</span>\n    <span class="attached-task-badge">\n      ');var r=t.boundTasksStr?JSON.parse(t.boundTasksStr):[];o("\n      ");var s=r[0];if(o("\n      "),s){var a=s.labelClass||"task-status-unknown",d=s.taskId,l="#"+(d.indexOf(",")<0?d.substr(0,5):"...");o('\n          <span class="task-id has-task-tooltip task-label '),o(i.escapeHtml(a)),o('" data-task-id="'),o(i.escapeHtml(s.taskId)),o('">'),o(i.escapeHtml(l)),o("</span>\n        ")}return o('\n    </span>\n    \x3c!--<span class="link" data-action="rename">'),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.rename.label"))),o('</span>--\x3e\n  </span>\n  \n  <span class="toolbar-separator"></span>\n  \n  \n  \x3c!-- EDIT MODE --\x3e\n  <span class="edit-mode-buttons">\n    \x3c!-- Save --\x3e\n    <button class="btn" data-action="save" '),o(t.dirty?"":'disabled="disabled"'),o('>\n      <i class="fa fa-floppy-o"></i>\n      '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.save.label"))),o('\n    </button>\n    \n    \x3c!-- History --\x3e\n    <button class="btn" data-action="history">\n      <i class="fa fa-book"></i>\n      '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.history.label"))),o("\n    </button>\n    \n    \x3c!-- Exit edit mode --\x3e\n    "),0==t.previewMode&&t.editModeFromPreview&&(o('\n    <button class="btn exit-btn" data-action="exit-edit-mode">\n      '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.exitEditMode.label"))),o("\n    </button>\n    ")),o('\n    \n    <span class="toolbar-separator"></span>\n  </span>\n    \n  '),t.customHtml&&(o("\n    "),o(t.customHtml),o("\n  ")),o('\n  \n  \x3c!-- EDIT MODE --\x3e\n  <span class="edit-mode-buttons">\n    \n    \x3c!-- Tools --\x3e\n    <button class="btn" data-action="open-tools-menu">\n        <i class="fa fa-wrench"></i> '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.tools.label"))),o(' <span class="ico-arrow-down trigger"></span>\n    </button>\n    \n    <div class="context-menu-toolbar-tools">\n      <div class="context-menu-backdrop2"></div>\n      <div class="context-menu-content">\n        \x3c!-- Send --\x3e\n        <button class="btn" data-action="send">\n          <i class="fa left ico-paper-airplane"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.send.label"))),o('\n        </button>\n        \n        \x3c!-- Download --\x3e\n        <button class="btn" data-action="download">\n          <i class="fa fa-download"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.export.label"))),o("\n        </button>\n        \n        \x3c!-- Save as PDF --\x3e\n        "),t.canSaveAsPdf&&(o('\n        <button class="btn" data-action="save-as-pdf">\n          <i class="fa left privmx-icon privmx-icon-pdf"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.saveAsPdf.label"))),o("\n        </button>\n        ")),o('\n        \n        \x3c!-- Attach to task --\x3e\n        <button class="btn" data-action="attach-to-task">\n          <i class="fa privmx-icon privmx-icon-tasks"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.attachToTask.label"))),o('\n        </button>\n        \n        \x3c!-- Rename --\x3e\n        <button class="btn" data-action="rename">\n          <i class="fa fa-pencil-square-o"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.rename.label"))),o('\n        </button>\n\n        \x3c!-- Lock --\x3e\n        <button class="btn" data-action="lock">\n          <i class="fa fa-lock"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.lock.label"))),o('\n        </button>\n\n        \x3c!-- Unlock --\x3e\n        <button class="btn" data-action="unlock">\n          <i class="fa fa-unlock"></i>\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.unlock.label"))),o('\n        </button>\n\n      </div>\n    </div>\n\n  </span>\n  \n  \x3c!-- READONLY MODE --\x3e\n  <span class="read-mode-buttons">\n    \x3c!-- Start edit mode --\x3e\n    '),t.previewMode||(o('\n    <button class="btn" data-action="enter-edit-mode">\n      <i class="fa fa-pencil"></i>\n      '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.startEditMode.label"))),o("\n    </button>\n    ")),o('\n  \n    <span class="toolbar-separator"></span>\n    \n  </span>\n  \n  \x3c!-- READONLY MODE --\x3e\n  <span class="read-mode-buttons">\n    \n    \x3c!-- Tools --\x3e\n    <button class="btn" data-action="open-tools-menu">\n        <i class="fa fa-wrench"></i> '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.tools.label"))),o(' <span class="ico-arrow-down trigger"></span>\n    </button>\n    \n    <div class="context-menu-toolbar-tools">\n      <div class="context-menu-backdrop2"></div>\n      <div class="context-menu-content">\n  \n          \x3c!-- Send --\x3e\n          <button class="btn" data-action="send">\n            <i class="fa left ico-paper-airplane"></i>\n            '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.send.label"))),o('\n          </button>\n          \n          \x3c!-- Download --\x3e\n          <button class="btn" data-action="download">\n            <i class="fa fa-download"></i>\n            '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.export.label"))),o("\n          </button>\n          \n          \x3c!-- Save as PDF --\x3e\n          "),t.canSaveAsPdf&&(o('\n          <button class="btn" data-action="save-as-pdf">\n            <i class="fa left privmx-icon privmx-icon-pdf"></i>\n            '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.saveAsPdf.label"))),o("\n          </button>\n          ")),o('\n          \n      </div>\n    </div>\n\n  </span>\n  \n  \x3c!-- RIGHT SIDE --\x3e\n  <span class="right-side-buttons">\n    '),t.rightSideHtml&&(o("\n      "),o(t.rightSideHtml),o("\n    ")),o('\n    \n    <span class="float-right read-mode-buttons">\n      <button class="btn float-right" data-action="reload">\n        <i class="fa fa-refresh"></i>\n        '),o(i.escapeHtml(i.i18n("plugin.editor.window.editor.toolbar.button.reload.label"))),o('\n      </button>\n    </span>\n  </span>\n</div>\n<span class="more-button hide" data-action="open-toolbar-more">&raquo;</span>\n<div class="context-menu-toolbar-more '),o(i.escapeHtml(t.editMode?"edit-mode":"")),o('">\n  <div class="context-menu-backdrop2"></div>\n  <div class="context-menu-content">\n  </div>\n</div>'),n}}},{}],30:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("pmc-web"),s=t("./template/main.html"),a=function(t){function e(e){return t.call(this,e,s.func)||this}return o(e,t),e}(r.window.base.BaseWindowView);i.MindmapHelpWindowView=a,a.prototype.className="com.privmx.plugin.editor.window.mindmaphelp.MindmapHelpWindowView"},{"./template/main.html":31,"pmc-web":12}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="",o=function(t){n+=t};return o('<div id="mindmap-keyboard-help">\n  <table>\n    <tbody>\n\n\n\n      <tr>\n        <td colspan="2" class="header">\n          '),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.navigation"))),o("\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.up"))),o("</kbd> /\n          <kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.down"))),o("</kbd> /\n          <kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.left"))),o("</kbd> /\n          <kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.right"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.nodesNavigation"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.space"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.toggleSubtree"))),o("</td>\n      </tr>\n      <tr>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.click"))),o("</td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.selectNodeWithMouse"))),o('</td>\n      </tr>\n\n\n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.nodesEdition"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>F2</kbd> / "),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.dbclick"))),o("\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.editNode"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Shift</kbd><kbd>Enter</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.insertNewLineInsideNode"))),o('</td>\n      </tr>\n\n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.creatingAndDeletingNodes"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Enter</kbd> "),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.and"))),o(" <kbd>Shift</kbd><kbd>Enter</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.createSiblings"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Tab</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.createChild"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Shift</kbd><kbd>Tab</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.createParent"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Delete</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.deleteNode"))),o('</td>\n      </tr>\n      \n      \n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.movingNodes"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.up"))),o("</kbd> /\n          <kbd>Ctrl</kbd><kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.down"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.simpleMoveUpDown"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.left"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.moveUpInHierarchy"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.right"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.moveDownInHierarchy"))),o('</td>\n      </tr>\n\n \n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.clipboard"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>X</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.cutNode"))),o("</td>\n      </tr>\n      \n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>C</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.copyNode"))),o("</td>\n      </tr>\n      \n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>V</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.paste"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>Z</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.undo"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>Y</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.redo"))),o('</td>\n      </tr>\n      \n\n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.styling"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>F3</kbd> / <kbd>F4</kbd> / <kbd>F5</kbd> / <kbd>F6</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.predefined"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>F1</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.default"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>B</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.bold"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Shift</kbd><kbd>1</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.important"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.right"))),o("</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.jumpToImportant"))),o("</td>\n      </tr>\n\n      <tr>\n        <td>\n          <kbd>Shift</kbd><kbd>2</kbd>\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.style.todo"))),o('</td>\n      </tr>\n      \n\n\n      <tr>\n        <td colspan="2" class="header">'),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.header.opening"))),o("</td>\n      </tr>\n      <tr>\n        <td>\n          <kbd>Ctrl</kbd> "),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.key.click"))),o("\n        </td>\n        <td>"),o(i.escapeHtml(i.i18n("plugin.editor.window.mindmapHelp.label.opening.tasksAndFiles"))),o("</td>\n      </tr>\n\n    </tbody>\n  </table>\n</div>\n"),n}}},{}],32:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("pmc-web"),s=t("./template/main.html"),a=function(t){function e(e){var i=t.call(this,e,s.func)||this;return i.menuModel={id:"plugin-editor",priority:400,groupId:"misc",icon:"file-o fa-flip-vertical",labelKey:"plugin.editor.window.settings.menu.item.editor.label"},i.parent.registerTab({tab:i}),i}return o(e,t),e}(r.window.settings.BaseView);i.SettingsNotesView=a,a.prototype.className="com.privmx.plugin.editor.window.settingsnotes.SettingsNotesView"},{"./template/main.html":33,"pmc-web":12}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.func={helper:"com.privmx.plugin.editor.main.EditorViewHelper",func:function(t,e,i){var n="",o=function(t){n+=t},r=t.notes&&t.notes.style||"default",s=i.getAvailableNotesStyles();for(var a in o('\n<div class="section notes-section">\n  \n  <div class="base-form">\n    <div class="fields">\n      <div class="field">\n        <div class="info">\n            '),o(i.escapeHtml(i.i18n("plugin.editor.window.settings.section.editor.style.label"))),o('\n        </div>\n        <div class="input radio">\n          '),s)o('\n            <label class="preview-label">\n              <input type="radio" name="notes.style" value="'),o(i.escapeHtml(a)),o('" '),r==a&&o('checked="checked"'),o(">\n              "),o(i.escapeHtml(s[a])),o('\n              <span class="preview editor-theme-preview" data-style-name="'),o(i.escapeHtml(a)),o('">ABC</span>\n            </label>\n          ');return o('\n        </div>\n      </div>\n      <div class="field buttons">\n        <div class="info">\n        </div>\n        <div class="input">\n          <button class="btn btn-success save-button progress-button">\n            <i class="fa fa-save"></i>\n            <span class="button-text">'),o(i.escapeHtml(i.i18n("plugin.editor.window.settings.section.editor.button.save.text"))),o("</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n</div>\n"),n}}},{}]},{},[14]);
//# sourceMappingURL=view.js.map
